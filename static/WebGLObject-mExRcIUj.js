import{b8 as N,b9 as D,ba as P,bb as W,bc as $,bd as S,be as k,bf as F,a5 as I,a1 as U,a_ as Y,_ as X,aw as q,ax as C,a8 as _,bg as H,bh as V,a2 as K,a$ as Z}from"./main-biu6-4ID.js";import{i as R,s as L,r as J,m as j,x as w,a as p,D as Q,z as ee,q as A,_ as ae,E as te,F as ne}from"./app-4ccm2Cjh.js";import{g as ie}from"./gltfLoader-2E1eYpol.js";/*!
 * @monogrid/vue-boost v8.2.0-develop.3 Copyright (C) MONOGRID S.R.L. - All Rights Reserved - Unauthorized copying of this file, via any medium is strictly prohibited
 */function oe(i){const f=new S;return f.setFromObject(i),{boundingBox:f,sizes:f.getSize(new k)}}function re(i,f,d={}){const b=R(N);if(!b)throw new Error("[useDomMapping] A ThreeEnvironment is not provided");const g=D(i,d.domMappingOptions),o=L(new P),l=L(),t=L(),c=J(),a=j(()=>!!w(d.wrap)),z=j(()=>!!w(d.debug)),M=j(()=>a.value?o.value:l.value),B=j(()=>w(d.axis)||"xy"),x=j(()=>w(d.order)||0),m=e=>{e&&(b.webgl.scene.remove(e),F(e,d.disposeOptions))};return p([()=>w(f),a],([e,s])=>{l.value&&m(l.value),o.value.children[0]&&m(o.value.children[0]),c.value=void 0,e&&(l.value=e,c.value=oe(l.value),s?(o.value.add(l.value),b.webgl.scene.add(o.value)):b.webgl.scene.add(l.value))},{immediate:!0}),p([M,x],([e,s])=>{e&&(e.renderOrder=s)},{immediate:!0}),p([M,z],([e,s])=>{t.value&&m(t.value),!(!e||!s)&&(t.value=new W(e,65280),t.value.renderOrder=999,b.webgl.scene.add(t.value))},{immediate:!0}),p([M,g.position],([e,{x:s,y:n,z:h}])=>{var y;e&&(e.position.set(s,n,h),(y=t.value)==null||y.update())},{immediate:!0,flush:"sync"}),p([M,c,g.scale,B],([e,s,n,h])=>{var y;if(!e||!s)return;if(n.x===0||n.y===0){e.scale.setScalar(0);return}const T=h.includes("y")?s.sizes.y:n.y;let r=h.includes("x")?s.sizes.x:n.x;h.includes("z")&&(r=Math.max(r,s.sizes.z));const u=$(n.x,n.y,r,T,1,.5,.5,!1);e.scale.setScalar(Math.max(u.width/r,u.height/T)),(y=t.value)==null||y.update()},{immediate:!0,flush:"sync"}),Q(()=>{m(l.value),m(o.value),m(t.value)}),{object:l,debugObj:t,domMapping:g}}const se=(i,f,d)=>{const b=R(I),g=L(),o=L(),{object:l,domMapping:t}=re(i,o,d);function c(a){o.value=a.scene||a.scenes[0],g.value=a}return p(()=>w(f),a=>{a&&ie.load(a,c,void 0,console.error)},{immediate:!0}),p(()=>b.instance.value,a=>{a==null||a.on("scroll",()=>t.update())},{immediate:!0}),{domMapping:t,gltf:g,model:o,object:l}},le=ee({name:"WebGLObject",props:{data:{type:Object,required:!0},wrap:{type:Boolean,default:!1},order:{type:Number,default:2},angleX:{type:Number,default:20},angleY:{type:Number,default:10},breathY:{type:Number,default:0},animationProgress:{type:Number,default:void 0}},setup(i,{attrs:f,slots:d,emit:b,expose:g}){const o=R(C);if(!o)throw new Error("[WebGLObject] A ThreeEnvironment is not provided");const l=U("el"),t=A({x:0,y:0}),c=A({x:0,y:0,z:0}),a=V(),z=K(),{mappedX:M,mappedY:B}=Z();let x,m;Y(M,{duration:1,ease:"power3",onUpdate:function(){z.value||n.value&&(t.y=this.targets()[0].value*_.degToRad(i.angleX))}}),Y(B,{duration:1,ease:"power3",onUpdate:function(){z.value||n.value&&(t.x=this.targets()[0].value*_.degToRad(i.angleY))}});const{gltf:e,model:s,object:n,domMapping:h}=se(l,()=>{var r;return i.data?"/media/".concat((r=i.data)==null?void 0:r.id):void 0},{order:()=>i.order,wrap:()=>i.wrap,domMappingOptions:{boundingOptions:{intersectionOptions:{rootMargin:"40px 0px"},listenScroll:!1},z:X.MODEL}});function y({time:r}){n.value&&(n.value.rotation.x=c.x+t.x,n.value.rotation.y=c.y+t.y,n.value.rotation.z=c.z,!z.value&&(h.transform.translate.y=Math.sin(r*.75)*i.breathY),a.uniforms.uPosY.value=window.scrollY/window.innerHeight,typeof i.animationProgress=="number"&&(x!=null&&x.length)&&(x.forEach(u=>{u[0].time=u[1].duration*i.animationProgress,u[0].play()}),m.update(0)))}const{toggle:T}=q(y);p(h.visible,r=>T(r),{immediate:!0}),p([e,s],([r,u])=>{var E;u&&(u.traverse(v=>{"isMesh"in v&&(Array.isArray(v.material)?v.material.forEach((O,G)=>v.material[G]=a):v.material=a)}),!(((E=r.animations)==null?void 0:E.length)<1)&&(m=new H(u),x=r.animations.map(v=>{const O=m.clipAction(v);return O.clampWhenFinished=!0,[O,v]})))}),p([()=>w(o.width),()=>w(o.height),()=>o.webgl.renderer,n],([r,u,E,v])=>{if(!E||!v)return;const O=E.getPixelRatio()||1;a.uniforms.uResolution.value.set(r*O,u*O)},{immediate:!0}),g({object:n,rotation:c,domMapping:h})}}),ue={ref:"el",class:"pointer-events-none"};function de(i,f,d,b,g,o){return te(),ne("div",ue,null,512)}const pe=ae(le,[["render",de]]);export{pe as W,se as u};
//# sourceMappingURL=WebGLObject-mExRcIUj.js.map
