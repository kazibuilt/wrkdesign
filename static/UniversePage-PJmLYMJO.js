var qt=Object.defineProperty;var Gt=(u,o,n)=>o in u?qt(u,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):u[o]=n;var T=(u,o,n)=>(Gt(u,typeof o!="symbol"?o+"":o,n),n);import{bm as De,Z as w,ap as Vt,bn as G,be as W,bo as $e,aw as Re,b7 as $t,b8 as Wt,bp as Ne,as as St,a$ as Tt,bq as qe,br as Mt,bs as jt,at as ee,bt as tt,bu as se,bv as rt,bw as Me,ba as J,bx as we,by as Ae,bz as At,bA as It,bB as ye,bC as Ht,bD as Oe,bE as F,bF as Yt,bG as We,bH as Fe,bI as kt,bJ as Xt,bK as Qt,bL as Le,bM as Zt,bN as st,bO as Kt,bP as Jt,bQ as er,bR as tr,bS as ze,bT as rr,bU as nr,bV as ir,bW as ar,bX as or,ax as sr,O as lr,bY as lt,ac as ur,$ as cr,bZ as dr,af as fr,ag as mr,ah as vr}from"./main-biu6-4ID.js";import{r as P,q as ue,a as N,z as nt,m as O,_ as Bt,E as Z,$ as hr,H as xe,Z as pr,K as q,I as ut,L as _r,a0 as xr,x as le,i as it,D as gr,U as Ie,F as ie,G as X,T as ct,J as ve,S as dt,a6 as he}from"./app-4ccm2Cjh.js";import{g as yr}from"./gltfLoader-2E1eYpol.js";import{g as wr}from"./utils-cms-qfO2J2g-.js";const br="/static/uni-click-jXQLZNmw.mp3",Sr="/static/uni-hold-loop-3c_oeF90.mp3",Tr="/static/uni-hover-YgbZcW5a.mp3",Mr="/static/uni-shuffle-IcRAmfYJ.mp3",Ar="/static/uni-soundtrack-filter-loop-w2jlrMcD.mp3",Ir="/static/cables-ceiling-JuoIRJP1.glb",kr="/static/cables-floor-DplXJne-.glb",Br="/static/monitors-CpyZGrTw.glb";/*!
 *  howler.js v2.2.4 (no StereoPanner)
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */let E,d;(function(){var u=function(){this.init()};u.prototype={init:function(){var e=this||d;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator=typeof window<"u"&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||d;if(e=parseFloat(e),t.ctx||g(),typeof e<"u"&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,d.ctx.currentTime);for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var i=t._howls[r]._getSoundIds(),s=0;s<i.length;s++){var l=t._howls[r]._soundById(i[s]);l&&l._node&&(l._node.volume=l._volume*e)}return t}return t._volume},mute:function(e){var t=this||d;t.ctx||g(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,d.ctx.currentTime);for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var i=t._howls[r]._getSoundIds(),s=0;s<i.length;s++){var l=t._howls[r]._soundById(i[s]);l&&l._node&&(l._node.muted=e?!0:l._muted)}return t},stop:function(){for(var e=this||d,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||d,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&typeof e.ctx.close<"u"&&(e.ctx.close(),e.ctx=null,g()),e},codecs:function(e){return(this||d)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||d;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if(typeof Audio<"u")try{var t=new Audio;typeof t.oncanplaythrough>"u"&&(e._canPlayEvent="canplay")}catch(r){e.noAudio=!0}else e.noAudio=!0;try{var t=new Audio;t.muted&&(e.noAudio=!0)}catch(r){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||d,t=null;try{t=typeof Audio<"u"?new Audio:null}catch(y){return e}if(!t||typeof t.canPlayType!="function")return e;var r=t.canPlayType("audio/mpeg;").replace(/^no$/,""),i=e._navigator?e._navigator.userAgent:"",s=i.match(/OPR\/(\d+)/g),l=s&&parseInt(s[0].split("/")[1],10)<33,a=i.indexOf("Safari")!==-1&&i.indexOf("Chrome")===-1,v=i.match(/Version\/(.*?) /),h=a&&v&&parseInt(v[1],10)<15;return e._codecs={mp3:!!(!l&&(r||t.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!r,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!h&&t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!h&&t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||d;if(!(e._audioUnlocked||!e.ctx)){e._audioUnlocked=!1,e.autoUnlock=!1,!e._mobileUnloaded&&e.ctx.sampleRate!==44100&&(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(r){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var i=new Audio;i._unlocked=!0,e._releaseHtml5Audio(i)}catch(y){e.noAudio=!0;break}for(var s=0;s<e._howls.length;s++)if(!e._howls[s]._webAudio)for(var l=e._howls[s]._getSoundIds(),a=0;a<l.length;a++){var v=e._howls[s]._soundById(l[a]);v&&v._node&&!v._node._unlocked&&(v._node._unlocked=!0,v._node.load())}e._autoResume();var h=e.ctx.createBufferSource();h.buffer=e._scratchBuffer,h.connect(e.ctx.destination),typeof h.start>"u"?h.noteOn(0):h.start(0),typeof e.ctx.resume=="function"&&e.ctx.resume(),h.onended=function(){h.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0),document.removeEventListener("keydown",t,!0);for(var y=0;y<e._howls.length;y++)e._howls[y]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),document.addEventListener("keydown",t,!0),e}},_obtainHtml5Audio:function(){var e=this||d;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=new Audio().play();return t&&typeof Promise<"u"&&(t instanceof Promise||typeof t.then=="function")&&t.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var t=this||d;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(!(!e.autoSuspend||!e.ctx||typeof e.ctx.suspend>"u"||!d.usingWebAudio)){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio){for(var r=0;r<e._howls[t]._sounds.length;r++)if(!e._howls[t]._sounds[r]._paused)return e}return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var i=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(i,i)}},3e4),e}},_autoResume:function(){var e=this;if(!(!e.ctx||typeof e.ctx.resume>"u"||!d.usingWebAudio))return e.state==="running"&&e.ctx.state!=="interrupted"&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):e.state==="suspended"||e.state==="running"&&e.ctx.state==="interrupted"?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):e.state==="suspending"&&(e._resumeAfterSuspend=!0),e}},d=new u,E=function(e){var t=this;if(!e.src||e.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}t.init(e)},E.prototype={init:function(e){var t=this;return d.ctx||g(),t._autoplay=e.autoplay||!1,t._format=typeof e.format!="string"?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload=typeof e.preload=="boolean"||e.preload==="metadata"?e.preload:!0,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src=typeof e.src!="string"?e.src:[e.src],t._volume=e.volume!==void 0?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:e.xhr&&e.xhr.withCredentials?e.xhr.withCredentials:!1},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=d.usingWebAudio&&!t._html5,typeof d.ctx<"u"&&d.ctx&&d.autoUnlock&&d._unlockAudio(),d._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&t._preload!=="none"&&t.load(),t},load:function(){var e=this,t=null;if(d.noAudio){e._emit("loaderror",null,"No audio support.");return}typeof e._src=="string"&&(e._src=[e._src]);for(var r=0;r<e._src.length;r++){var i,s;if(e._format&&e._format[r])i=e._format[r];else{if(s=e._src[r],typeof s!="string"){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}i=/^data:audio\/([^;,]+);/i.exec(s),i||(i=/\.([^.]+)$/.exec(s.split("?",1)[0])),i&&(i=i[1].toLowerCase())}if(i||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),i&&d.codecs(i)){t=e._src[r];break}}if(!t){e._emit("loaderror",null,"No codec support for selected audio sources.");return}return e._src=t,e._state="loading",window.location.protocol==="https:"&&t.slice(0,5)==="http:"&&(e._html5=!0,e._webAudio=!1),new o(e),e._webAudio&&c(e),e},play:function(e,t){var r=this,i=null;if(typeof e=="number")i=e,e=null;else{if(typeof e=="string"&&r._state==="loaded"&&!r._sprite[e])return null;if(typeof e>"u"&&(e="__default",!r._playLock)){for(var s=0,l=0;l<r._sounds.length;l++)r._sounds[l]._paused&&!r._sounds[l]._ended&&(s++,i=r._sounds[l]._id);s===1?e=null:i=null}}var a=i?r._soundById(i):r._inactiveSound();if(!a)return null;if(i&&!e&&(e=a._sprite||"__default"),r._state!=="loaded"){a._sprite=e,a._ended=!1;var v=a._id;return r._queue.push({event:"play",action:function(){r.play(v)}}),v}if(i&&!a._paused)return t||r._loadQueue("play"),a._id;r._webAudio&&d._autoResume();var h=Math.max(0,a._seek>0?a._seek:r._sprite[e][0]/1e3),y=Math.max(0,(r._sprite[e][0]+r._sprite[e][1])/1e3-h),M=y*1e3/Math.abs(a._rate),S=r._sprite[e][0]/1e3,A=(r._sprite[e][0]+r._sprite[e][1])/1e3;a._sprite=e,a._ended=!1;var b=function(){a._paused=!1,a._seek=h,a._start=S,a._stop=A,a._loop=!!(a._loop||r._sprite[e][2])};if(h>=A){r._ended(a);return}var x=a._node;if(r._webAudio){var k=function(){r._playLock=!1,b(),r._refreshBuffer(a);var C=a._muted||r._muted?0:a._volume;x.gain.setValueAtTime(C,d.ctx.currentTime),a._playStart=d.ctx.currentTime,typeof x.bufferSource.start>"u"?a._loop?x.bufferSource.noteGrainOn(0,h,86400):x.bufferSource.noteGrainOn(0,h,y):a._loop?x.bufferSource.start(0,h,86400):x.bufferSource.start(0,h,y),M!==1/0&&(r._endTimers[a._id]=setTimeout(r._ended.bind(r,a),M)),t||setTimeout(function(){r._emit("play",a._id),r._loadQueue()},0)};d.state==="running"&&d.ctx.state!=="interrupted"?k():(r._playLock=!0,r.once("resume",k),r._clearTimer(a._id))}else{var U=function(){x.currentTime=h,x.muted=a._muted||r._muted||d._muted||x.muted,x.volume=a._volume*d.volume(),x.playbackRate=a._rate;try{var C=x.play();if(C&&typeof Promise<"u"&&(C instanceof Promise||typeof C.then=="function")?(r._playLock=!0,b(),C.then(function(){r._playLock=!1,x._unlocked=!0,t?r._loadQueue():r._emit("play",a._id)}).catch(function(){r._playLock=!1,r._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0})):t||(r._playLock=!1,b(),r._emit("play",a._id)),x.playbackRate=a._rate,x.paused){r._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}e!=="__default"||a._loop?r._endTimers[a._id]=setTimeout(r._ended.bind(r,a),M):(r._endTimers[a._id]=function(){r._ended(a),x.removeEventListener("ended",r._endTimers[a._id],!1)},x.addEventListener("ended",r._endTimers[a._id],!1))}catch(j){r._emit("playerror",a._id,j)}};x.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(x.src=r._src,x.load());var L=window&&window.ejecta||!x.readyState&&d._navigator.isCocoonJS;if(x.readyState>=3||L)U();else{r._playLock=!0,r._state="loading";var z=function(){r._state="loaded",U(),x.removeEventListener(d._canPlayEvent,z,!1)};x.addEventListener(d._canPlayEvent,z,!1),r._clearTimer(a._id)}}return a._id},pause:function(e){var t=this;if(t._state!=="loaded"||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var r=t._getSoundIds(e),i=0;i<r.length;i++){t._clearTimer(r[i]);var s=t._soundById(r[i]);if(s&&!s._paused&&(s._seek=t.seek(r[i]),s._rateSeek=0,s._paused=!0,t._stopFade(r[i]),s._node))if(t._webAudio){if(!s._node.bufferSource)continue;typeof s._node.bufferSource.stop>"u"?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0),t._cleanBuffer(s._node)}else(!isNaN(s._node.duration)||s._node.duration===1/0)&&s._node.pause();arguments[1]||t._emit("pause",s?s._id:null)}return t},stop:function(e,t){var r=this;if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"stop",action:function(){r.stop(e)}}),r;for(var i=r._getSoundIds(e),s=0;s<i.length;s++){r._clearTimer(i[s]);var l=r._soundById(i[s]);l&&(l._seek=l._start||0,l._rateSeek=0,l._paused=!0,l._ended=!0,r._stopFade(i[s]),l._node&&(r._webAudio?l._node.bufferSource&&(typeof l._node.bufferSource.stop>"u"?l._node.bufferSource.noteOff(0):l._node.bufferSource.stop(0),r._cleanBuffer(l._node)):(!isNaN(l._node.duration)||l._node.duration===1/0)&&(l._node.currentTime=l._start||0,l._node.pause(),l._node.duration===1/0&&r._clearSound(l._node))),t||r._emit("stop",l._id))}return r},mute:function(e,t){var r=this;if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"mute",action:function(){r.mute(e,t)}}),r;if(typeof t>"u")if(typeof e=="boolean")r._muted=e;else return r._muted;for(var i=r._getSoundIds(t),s=0;s<i.length;s++){var l=r._soundById(i[s]);l&&(l._muted=e,l._interval&&r._stopFade(l._id),r._webAudio&&l._node?l._node.gain.setValueAtTime(e?0:l._volume,d.ctx.currentTime):l._node&&(l._node.muted=d._muted?!0:e),r._emit("mute",l._id))}return r},volume:function(){var e=this,t=arguments,r,i;if(t.length===0)return e._volume;if(t.length===1||t.length===2&&typeof t[1]>"u"){var s=e._getSoundIds(),l=s.indexOf(t[0]);l>=0?i=parseInt(t[0],10):r=parseFloat(t[0])}else t.length>=2&&(r=parseFloat(t[0]),i=parseInt(t[1],10));var a;if(typeof r<"u"&&r>=0&&r<=1){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"volume",action:function(){e.volume.apply(e,t)}}),e;typeof i>"u"&&(e._volume=r),i=e._getSoundIds(i);for(var v=0;v<i.length;v++)a=e._soundById(i[v]),a&&(a._volume=r,t[2]||e._stopFade(i[v]),e._webAudio&&a._node&&!a._muted?a._node.gain.setValueAtTime(r,d.ctx.currentTime):a._node&&!a._muted&&(a._node.volume=r*d.volume()),e._emit("volume",a._id))}else return a=i?e._soundById(i):e._sounds[0],a?a._volume:0;return e},fade:function(e,t,r,i){var s=this;if(s._state!=="loaded"||s._playLock)return s._queue.push({event:"fade",action:function(){s.fade(e,t,r,i)}}),s;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),r=parseFloat(r),s.volume(e,i);for(var l=s._getSoundIds(i),a=0;a<l.length;a++){var v=s._soundById(l[a]);if(v){if(i||s._stopFade(l[a]),s._webAudio&&!v._muted){var h=d.ctx.currentTime,y=h+r/1e3;v._volume=e,v._node.gain.setValueAtTime(e,h),v._node.gain.linearRampToValueAtTime(t,y)}s._startFadeInterval(v,e,t,r,l[a],typeof i>"u")}}return s},_startFadeInterval:function(e,t,r,i,s,l){var a=this,v=t,h=r-t,y=Math.abs(h/.01),M=Math.max(4,y>0?i/y:i),S=Date.now();e._fadeTo=r,e._interval=setInterval(function(){var A=(Date.now()-S)/i;S=Date.now(),v+=h*A,v=Math.round(v*100)/100,h<0?v=Math.max(r,v):v=Math.min(r,v),a._webAudio?e._volume=v:a.volume(v,e._id,!0),l&&(a._volume=v),(r<t&&v<=r||r>t&&v>=r)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,a.volume(r,e._id),a._emit("fade",e._id))},M)},_stopFade:function(e){var t=this,r=t._soundById(e);return r&&r._interval&&(t._webAudio&&r._node.gain.cancelScheduledValues(d.ctx.currentTime),clearInterval(r._interval),r._interval=null,t.volume(r._fadeTo,e),r._fadeTo=null,t._emit("fade",e)),t},loop:function(){var e=this,t=arguments,r,i,s;if(t.length===0)return e._loop;if(t.length===1)if(typeof t[0]=="boolean")r=t[0],e._loop=r;else return s=e._soundById(parseInt(t[0],10)),s?s._loop:!1;else t.length===2&&(r=t[0],i=parseInt(t[1],10));for(var l=e._getSoundIds(i),a=0;a<l.length;a++)s=e._soundById(l[a]),s&&(s._loop=r,e._webAudio&&s._node&&s._node.bufferSource&&(s._node.bufferSource.loop=r,r&&(s._node.bufferSource.loopStart=s._start||0,s._node.bufferSource.loopEnd=s._stop,e.playing(l[a])&&(e.pause(l[a],!0),e.play(l[a],!0)))));return e},rate:function(){var e=this,t=arguments,r,i;if(t.length===0)i=e._sounds[0]._id;else if(t.length===1){var s=e._getSoundIds(),l=s.indexOf(t[0]);l>=0?i=parseInt(t[0],10):r=parseFloat(t[0])}else t.length===2&&(r=parseFloat(t[0]),i=parseInt(t[1],10));var a;if(typeof r=="number"){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"rate",action:function(){e.rate.apply(e,t)}}),e;typeof i>"u"&&(e._rate=r),i=e._getSoundIds(i);for(var v=0;v<i.length;v++)if(a=e._soundById(i[v]),a){e.playing(i[v])&&(a._rateSeek=e.seek(i[v]),a._playStart=e._webAudio?d.ctx.currentTime:a._playStart),a._rate=r,e._webAudio&&a._node&&a._node.bufferSource?a._node.bufferSource.playbackRate.setValueAtTime(r,d.ctx.currentTime):a._node&&(a._node.playbackRate=r);var h=e.seek(i[v]),y=(e._sprite[a._sprite][0]+e._sprite[a._sprite][1])/1e3-h,M=y*1e3/Math.abs(a._rate);(e._endTimers[i[v]]||!a._paused)&&(e._clearTimer(i[v]),e._endTimers[i[v]]=setTimeout(e._ended.bind(e,a),M)),e._emit("rate",a._id)}}else return a=e._soundById(i),a?a._rate:e._rate;return e},seek:function(){var e=this,t=arguments,r,i;if(t.length===0)e._sounds.length&&(i=e._sounds[0]._id);else if(t.length===1){var s=e._getSoundIds(),l=s.indexOf(t[0]);l>=0?i=parseInt(t[0],10):e._sounds.length&&(i=e._sounds[0]._id,r=parseFloat(t[0]))}else t.length===2&&(r=parseFloat(t[0]),i=parseInt(t[1],10));if(typeof i>"u")return 0;if(typeof r=="number"&&(e._state!=="loaded"||e._playLock))return e._queue.push({event:"seek",action:function(){e.seek.apply(e,t)}}),e;var a=e._soundById(i);if(a)if(typeof r=="number"&&r>=0){var v=e.playing(i);v&&e.pause(i,!0),a._seek=r,a._ended=!1,e._clearTimer(i),!e._webAudio&&a._node&&!isNaN(a._node.duration)&&(a._node.currentTime=r);var h=function(){v&&e.play(i,!0),e._emit("seek",i)};if(v&&!e._webAudio){var y=function(){e._playLock?setTimeout(y,0):h()};setTimeout(y,0)}else h()}else if(e._webAudio){var M=e.playing(i)?d.ctx.currentTime-a._playStart:0,S=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(S+M*Math.abs(a._rate))}else return a._node.currentTime;return e},playing:function(e){var t=this;if(typeof e=="number"){var r=t._soundById(e);return r?!r._paused:!1}for(var i=0;i<t._sounds.length;i++)if(!t._sounds[i]._paused)return!0;return!1},duration:function(e){var t=this,r=t._duration,i=t._soundById(e);return i&&(r=t._sprite[i._sprite][1]/1e3),r},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,r=0;r<t.length;r++)t[r]._paused||e.stop(t[r]._id),e._webAudio||(e._clearSound(t[r]._node),t[r]._node.removeEventListener("error",t[r]._errorFn,!1),t[r]._node.removeEventListener(d._canPlayEvent,t[r]._loadFn,!1),t[r]._node.removeEventListener("ended",t[r]._endFn,!1),d._releaseHtml5Audio(t[r]._node)),delete t[r]._node,e._clearTimer(t[r]._id);var i=d._howls.indexOf(e);i>=0&&d._howls.splice(i,1);var s=!0;for(r=0;r<d._howls.length;r++)if(d._howls[r]._src===e._src||e._src.indexOf(d._howls[r]._src)>=0){s=!1;break}return n&&s&&delete n[e._src],d.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,r,i){var s=this,l=s["_on"+e];return typeof t=="function"&&l.push(i?{id:r,fn:t,once:i}:{id:r,fn:t}),s},off:function(e,t,r){var i=this,s=i["_on"+e],l=0;if(typeof t=="number"&&(r=t,t=null),t||r)for(l=0;l<s.length;l++){var a=r===s[l].id;if(t===s[l].fn&&a||!t&&a){s.splice(l,1);break}}else if(e)i["_on"+e]=[];else{var v=Object.keys(i);for(l=0;l<v.length;l++)v[l].indexOf("_on")===0&&Array.isArray(i[v[l]])&&(i[v[l]]=[])}return i},once:function(e,t,r){var i=this;return i.on(e,t,r,1),i},_emit:function(e,t,r){for(var i=this,s=i["_on"+e],l=s.length-1;l>=0;l--)(!s[l].id||s[l].id===t||e==="load")&&(setTimeout((function(a){a.call(this,t,r)}).bind(i,s[l].fn),0),s[l].once&&i.off(e,s[l].fn,s[l].id));return i._loadQueue(e),i},_loadQueue:function(e){var t=this;if(t._queue.length>0){var r=t._queue[0];r.event===e&&(t._queue.shift(),t._loadQueue()),e||r.action()}return t},_ended:function(e){var t=this,r=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var i=!!(e._loop||t._sprite[r][2]);if(t._emit("end",e._id),!t._webAudio&&i&&t.stop(e._id,!0).play(e._id),t._webAudio&&i){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=d.ctx.currentTime;var s=(e._stop-e._start)*1e3/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),s)}return t._webAudio&&!i&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),d._autoSuspend()),!t._webAudio&&!i&&t.stop(e._id,!0),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if(typeof t._endTimers[e]!="function")clearTimeout(t._endTimers[e]);else{var r=t._soundById(e);r&&r._node&&r._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,r=0;r<t._sounds.length;r++)if(e===t._sounds[r]._id)return t._sounds[r];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new o(e)},_drain:function(){var e=this,t=e._pool,r=0,i=0;if(!(e._sounds.length<t)){for(i=0;i<e._sounds.length;i++)e._sounds[i]._ended&&r++;for(i=e._sounds.length-1;i>=0;i--){if(r<=t)return;e._sounds[i]._ended&&(e._webAudio&&e._sounds[i]._node&&e._sounds[i]._node.disconnect(0),e._sounds.splice(i,1),r--)}}},_getSoundIds:function(e){var t=this;if(typeof e>"u"){for(var r=[],i=0;i<t._sounds.length;i++)r.push(t._sounds[i]._id);return r}else return[e]},_refreshBuffer:function(e){var t=this;return e._node.bufferSource=d.ctx.createBufferSource(),e._node.bufferSource.buffer=n[t._src],e._node.bufferSource.connect(e._fxInsertIn),e._node.bufferSource.connect(e._fxSend),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,d.ctx.currentTime),t},_cleanBuffer:function(e){var t=this,r=d._navigator&&d._navigator.vendor.indexOf("Apple")>=0;if(!e.bufferSource)return t;if(d._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),r))try{e.bufferSource.buffer=d._scratchBuffer}catch(i){}return e.bufferSource=null,t},_clearSound:function(e){var t=/MSIE |Trident\//.test(d._navigator&&d._navigator.userAgent);t||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var o=function(e){this._parent=e,this.init()};o.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++d._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,r=d._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=typeof d.ctx.createGain>"u"?d.ctx.createGainNode():d.ctx.createGain(),e._node.gain.setValueAtTime(r,d.ctx.currentTime),e._node.paused=!0,e._node.connect(d.masterGain),e._fxSend=typeof d.ctx.createGain>"u"?d.ctx.createGainNode():d.ctx.createGain(),e._fxInsertIn=typeof d.ctx.createGain>"u"?d.ctx.createGainNode():d.ctx.createGain(),e._fxInsertOut=typeof d.ctx.createGain>"u"?d.ctx.createGainNode():d.ctx.createGain(),e._panner?e._fxInsertOut.connect(e._panner):e._fxInsertOut.connect(e._node),e._fxInsertIn.connect(e._fxInsertOut)):d.noAudio||(e._node=d._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(d._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=t._preload===!0?"auto":t._preload,e._node.volume=r*d.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++d._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(e._node.duration*10)/10,Object.keys(t._sprite).length===0&&(t._sprite={__default:[0,t._duration*1e3]}),t._state!=="loaded"&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(d._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(e._node.duration*10)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=t._duration*1e3),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var n={},c=function(e){var t=e._src;if(n[t]){e._duration=n[t].duration,_(e);return}if(/^data:[^;]+;base64,/.test(t)){for(var r=atob(t.split(",")[1]),i=new Uint8Array(r.length),s=0;s<r.length;++s)i[s]=r.charCodeAt(s);m(i.buffer,e)}else{var l=new XMLHttpRequest;l.open(e._xhr.method,t,!0),l.withCredentials=e._xhr.withCredentials,l.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(a){l.setRequestHeader(a,e._xhr.headers[a])}),l.onload=function(){var a=(l.status+"")[0];if(a!=="0"&&a!=="2"&&a!=="3"){e._emit("loaderror",null,"Failed loading audio file with status: "+l.status+".");return}m(l.response,e)},l.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete n[t],e.load())},f(l)}},f=function(e){try{e.send()}catch(t){e.onerror()}},m=function(e,t){var r=function(){t._emit("loaderror",null,"Decoding audio data failed.")},i=function(s){s&&t._sounds.length>0?(n[t._src]=s,_(t,s)):r()};typeof Promise<"u"&&d.ctx.decodeAudioData.length===1?d.ctx.decodeAudioData(e).then(i).catch(r):d.ctx.decodeAudioData(e,i,r)},_=function(e,t){t&&!e._duration&&(e._duration=t.duration),Object.keys(e._sprite).length===0&&(e._sprite={__default:[0,e._duration*1e3]}),e._state!=="loaded"&&(e._state="loaded",e._emit("load"),e._loadQueue())},g=function(){if(d.usingWebAudio){try{typeof AudioContext<"u"?d.ctx=new AudioContext:typeof webkitAudioContext<"u"?d.ctx=new webkitAudioContext:d.usingWebAudio=!1}catch(s){d.usingWebAudio=!1}d.ctx||(d.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(d._navigator&&d._navigator.platform),t=d._navigator&&d._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),r=t?parseInt(t[1],10):null;if(e&&r&&r<9){var i=/safari/.test(d._navigator&&d._navigator.userAgent.toLowerCase());d._navigator&&!i&&(d.usingWebAudio=!1)}d.usingWebAudio&&(d.masterGain=typeof d.ctx.createGain>"u"?d.ctx.createGainNode():d.ctx.createGain(),d.masterGain.gain.setValueAtTime(d._muted?0:d._volume,d.ctx.currentTime),d.masterGain.connect(d.ctx.destination)),d._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:d,Howl:E}}),typeof exports<"u"&&(exports.Howler=d,exports.Howl=E),typeof global<"u"?(global.HowlerGlobal=u,global.Howler=d,global.Howl=E,global.Sound=o):typeof window<"u"&&(window.HowlerGlobal=u,window.Howler=d,window.Howl=E,window.Sound=o);/*!
 *  Filters Plugin - Adds support for filters (lowpass, high pass, band pass, or notch) on individual sounds when using WebAudio.
 *                 - Jack Campbell jackcampbell@acm.org
 *  howler.js v2.0.15
 *  howler.js v2.0.4
 *  howlerjs.com
 *
 *  (c) 2013-2017, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){E.prototype.init=function(t){return function(r){var i=this;return i._q=r.qFactor||1,i._freqMultiplier=r.freqMultiplier||1,i._filterType=r.filterType||"lowpass",i._frequency=r.frequency||1e3,i._onqFactor=r.onqFactor?[{fn:r.onqFactor}]:[],i._onfrequency=r.onfrequency?[{fn:r.onfrequency}]:[],i._onaddFilter=r.onaddFilter?[{fn:r.onaddFilter}]:[],i._onfilterType=r.onfilterType?[{fn:r.onfilterType}]:[],t.call(this,r)}}(E.prototype.init),E.prototype.qFactor=function(t,r){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"qFactor",action:function(){i.qFactor(t,r)}}),i;if(typeof r>"u")if(typeof t=="number")i._q=t;else return i._q;for(var s=i._getSoundIds(r),l=0;l<s.length;l++){var a=i._soundById(s[l]);if(a)if(typeof t=="number")a._node&&(i._q=t,a._filterNode||e(a),a._filterNode.Q.value=t,i._emit("qFactor",a._id));else return a._q}return i},E.prototype.filterType=function(t,r){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"filterType",action:function(){i.filterType(t,r)}}),i;if(typeof r>"u")if(t==="lowpass"||t==="highpass"||t==="bandpass"||t==="notch")i._filterType=t;else return i._filterType;for(var s=i._getSoundIds(r),l=0;l<s.length;l++){var a=i._soundById(s[l]);if(a)if(t==="lowpass"||t==="highpass"||t==="bandpass"||t==="notch")a._filterType=t,a._node&&(a._filterNode||e(a),a._filterNode.type=t,i._emit("filterType",a._id));else return a._filterType}return i},E.prototype.frequency=function(t,r){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"frequency",action:function(){i.frequency(t,r)}}),i;if(typeof r>"u")if(typeof t=="number")i._frequency=t;else return i._frequency;for(var s=i._getSoundIds(r),l=0;l<s.length;l++){var a=i._soundById(s[l]);if(a)if(typeof t=="number")a._frequency=t,a._node&&(a._filterNode||e(a),a._filterNode.frequency.value=t,i._emit("frequency",a._id));else return a._frequency}return i},E.prototype.addFilter=function(t,r){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"addFilter",action:function(){i.addFilter(t,r)}}),i;for(var s=i._getSoundIds(r),l=0;l<s.length;l++){var a=i._soundById(s[l]);a&&a._node&&(a._filterNode||e(a),a._filterNode.frequency.value=t.frequency||a._frequency,a._filterNode.Q.value=t.Q||a._q,a._filterNode.type=t.filterType||a._filterType,i._emit("addFilter",a._id))}return i},o.prototype.init=function(t){return function(){var r=this,i=r._parent;r._q=i._q,r._filterType=i._filterType,r._frequency=i._frequency,t.call(this)}}(o.prototype.init),o.prototype.reset=function(t){return function(){var r=this,i=r._parent;return r._q=i._q,r._filterType=i._filterType,r._frequency=i._frequency,t.call(this)}}(o.prototype.reset);var e=function(t){t._filterNode=d.ctx.createBiquadFilter(),t._filterNode.gain.value=1,t._filterNode.frequency.value=t._frequency||1e3,t._filterNode.type=t._filterType||"lowpass",t._filterNode.Q.value=t._q||1,t._fxInsertIn.disconnect(),t._fxInsertIn.connect(t._filterNode),t._filterNode.connect(t._fxInsertOut),t._paused||t._parent.pause(t._id,!0).play(t._id)}})()})();const Pt={"uni-click":1,"uni-hold-loop":1,"uni-hover":1,"uni-shuffle":1,"uni-soundtrack-filter-loop":1},Be=new Map,at=P(!1),Ee=P(1),ot=P(!1),ce=ue({});N([at,ot],([u,o])=>{u&&Ut(o?0:1)});function Pr(u,o){const n=o||u.src;return Be.has(n)||Be.set(n,new E({...u})),Be.get(n)}function Ut(u,o=.5,n=!0){w.to(Ee,{value:u,duration:o,overwrite:n,ease:"sine.inOut",onUpdate:()=>d.volume(Ee.value)})}function Ur(u){var o;at.value&&((o=ce[u])==null||o.play())}function Cr(u,{directionIn:o=!0,seek:n=!1,duration:c=.35}={}){const f=ce[u];n&&(f==null||f.seek(0)),f&&w.to(f,{volume:o?Pt[u]:0,duration:c,ease:"sine.inOut",overwrite:!0})}function Dr(u,{directionIn:o=!0,valueIn:n=.3,duration:c=.35}={}){const f=ce[u];f&&w.to(f,{_freqMultiplier:o?n:1,ease:"sine.inOut",duration:c,overwrite:!0,onUpdate:()=>{typeof f._freqMultiplier=="number"&&f.frequency(Ct(f._freqMultiplier))}})}function Fr(u){Object.entries(u).forEach(([o,{src:n,loop:c,filter:f}])=>{ce[o]=Pr({src:n,loop:c,autoplay:c,volume:c?0:Pt[o]||1},o),!Be.has(o)&&f&&ce[o].addFilter({filterType:"lowpass",frequency:Ct(1),Q:1})})}function Ct(u){const n=d.ctx.sampleRate/2,c=Math.log(n/40)/Math.LN2,f=Math.pow(2,c*(u-1));return n*f}const Er=function(){return new Promise(o=>{n()?o():setInterval(n,250);function n(){return d._audioUnlocked?(o(),!0):!1}})};Er().then(()=>at.value=!0);De(document,"visibilitychange",()=>{ot.value||(document.visibilityState==="hidden"?(w.killTweensOf(Ee),d.volume(0),Ee.value=0):Ut(1,4,!1))});const R={muted:ot,tracks:ce,play:Ur,fade:Cr,fadeFrequency:Dr,setAudio:Fr},Rr=nt({name:"ButtonSound",components:{},props:{},setup(u,o){const{bindings:n,component:c}=Vt(o),f=O(()=>R.muted.value?0:100);return{bindings:n,component:c,audioMixer:R,barPosition:f}}}),Or={class:"bar mt-2 h-1.25 w-28"},Lr={class:"labels flex flex-row items-end justify-between w-full mt-1.5"};function zr(u,o,n,c,f,m){return Z(),hr(xr(u.component),_r(u.bindings,{class:"btn-sound flex flex-col items-center",onClick:o[0]||(o[0]=_=>u.audioMixer.muted.value=!u.audioMixer.muted.value)}),{default:xe(()=>[q("div",Or,[q("div",{class:"bar-fill bg-current c-green w-[50%] h-full origin-top-left",style:pr({transform:"translateX(".concat(u.barPosition,"%)")})},null,4)]),q("div",Lr,[q("p",{class:ut(["label1",{"c-grey":!u.audioMixer.muted.value}])},"Off",2),q("p",{class:ut(["label1",{"c-grey":u.audioMixer.muted.value}])},"On",2)])]),_:1},16)}const Nr=Bt(Rr,[["render",zr],["__scopeId","data-v-f23e148d"]]),qr=.5*(Math.sqrt(3)-1),pe=(3-Math.sqrt(3))/6,ft=u=>Math.floor(u)|0,mt=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]);function Gr(u=Math.random){const o=Vr(u),n=new Float64Array(o).map(f=>mt[f%12*2]),c=new Float64Array(o).map(f=>mt[f%12*2+1]);return function(m,_){let g=0,e=0,t=0;const r=(m+_)*qr,i=ft(m+r),s=ft(_+r),l=(i+s)*pe,a=i-l,v=s-l,h=m-a,y=_-v;let M,S;h>y?(M=1,S=0):(M=0,S=1);const A=h-M+pe,b=y-S+pe,x=h-1+2*pe,k=y-1+2*pe,U=i&255,L=s&255;let z=.5-h*h-y*y;if(z>=0){const V=U+o[L],te=n[V],re=c[V];z*=z,g=z*z*(te*h+re*y)}let C=.5-A*A-b*b;if(C>=0){const V=U+M+o[L+S],te=n[V],re=c[V];C*=C,e=C*C*(te*A+re*b)}let j=.5-x*x-k*k;if(j>=0){const V=U+1+o[L+1],te=n[V],re=c[V];j*=j,t=j*j*(te*x+re*k)}return 70*(g+e+t)}}function Vr(u){const n=new Uint8Array(512);for(let c=0;c<512/2;c++)n[c]=c;for(let c=0;c<512/2-1;c++){const f=c+~~(u()*(256-c)),m=n[c];n[c]=n[f],n[f]=m}for(let c=256;c<512;c++)n[c]=n[c-256];return n}function $r(u,o,n){let c;const f=O(()=>le(o)),m={x:(n==null?void 0:n.x)||0,y:(n==null?void 0:n.y)||0};u===2?c=new G(m.x,m.y):u===3?(m.z=(n==null?void 0:n.z)||0,c=new W(m.x,m.y,m.z)):u===4&&(m.z=(n==null?void 0:n.z)||0,m.w=(n==null?void 0:n.w)||0,c=new $e(m.x,m.y,m.z,m.w));const _=ue(c.clone()),g=ue(c.clone()),e=()=>{_.copy(c),g.copy(c)};function t({rafDamp:r}){const{interpolate:i}=w.utils,s=f.value*r;_.x=i(_.x,g.x,s),_.y=i(_.y,g.y,s),_.z&&(_.z=i(_.z,g.z,s)),_.w&&(_.w=i(_.w,g.w,s))}return Re(t),De(document,"visibilitychange",()=>document.visibilityState==="hidden"&&e()),N(f,e,{deep:!0,immediate:!0}),{current:_,target:g,reset:e}}const Wr=(u,o)=>$r(2,u,o);var vt=!1,ae,je,He,Pe,Ue,Dt,Ce,Ye,Xe,Qe,Ft,Ze,Ke,Et,Rt;function D(){if(!vt){vt=!0;var u=navigator.userAgent,o=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(u),n=/(Mac OS X)|(Windows)|(Linux)/.exec(u);if(Ze=/\b(iPhone|iP[ao]d)/.exec(u),Ke=/\b(iP[ao]d)/.exec(u),Qe=/Android/i.exec(u),Et=/FBAN\/\w+;/i.exec(u),Rt=/Mobile/i.exec(u),Ft=!!/Win64/.exec(u),o){ae=o[1]?parseFloat(o[1]):o[5]?parseFloat(o[5]):NaN,ae&&document&&document.documentMode&&(ae=document.documentMode);var c=/(?:Trident\/(\d+.\d+))/.exec(u);Dt=c?parseFloat(c[1])+4:ae,je=o[2]?parseFloat(o[2]):NaN,He=o[3]?parseFloat(o[3]):NaN,Pe=o[4]?parseFloat(o[4]):NaN,Pe?(o=/(?:Chrome\/(\d+\.\d+))/.exec(u),Ue=o&&o[1]?parseFloat(o[1]):NaN):Ue=NaN}else ae=je=He=Ue=Pe=NaN;if(n){if(n[1]){var f=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(u);Ce=f?parseFloat(f[1].replace("_",".")):!0}else Ce=!1;Ye=!!n[2],Xe=!!n[3]}else Ce=Ye=Xe=!1}}var Je={ie:function(){return D()||ae},ieCompatibilityMode:function(){return D()||Dt>ae},ie64:function(){return Je.ie()&&Ft},firefox:function(){return D()||je},opera:function(){return D()||He},webkit:function(){return D()||Pe},safari:function(){return Je.webkit()},chrome:function(){return D()||Ue},windows:function(){return D()||Ye},osx:function(){return D()||Ce},linux:function(){return D()||Xe},iphone:function(){return D()||Ze},mobile:function(){return D()||Ze||Ke||Qe||Rt},nativeApp:function(){return D()||Et},android:function(){return D()||Qe},ipad:function(){return D()||Ke}},jr=Je,ke=!!(typeof window<"u"&&window.document&&window.document.createElement),Hr={canUseDOM:ke,canUseWorkers:typeof Worker<"u",canUseEventListeners:ke&&!!(window.addEventListener||window.attachEvent),canUseViewport:ke&&!!window.screen,isInWorker:!ke},Yr=Hr,Ot=Yr,Lt;Ot.canUseDOM&&(Lt=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function Xr(u,o){if(!Ot.canUseDOM||o&&!("addEventListener"in document))return!1;var n="on"+u,c=n in document;if(!c){var f=document.createElement("div");f.setAttribute(n,"return;"),c=typeof f[n]=="function"}return!c&&Lt&&u==="wheel"&&(c=document.implementation.hasFeature("Events.wheel","3.0")),c}var Qr=Xr,Zr=jr,Kr=Qr,ht=10,pt=40,_t=800;function zt(u){var o=0,n=0,c=0,f=0;return"detail"in u&&(n=u.detail),"wheelDelta"in u&&(n=-u.wheelDelta/120),"wheelDeltaY"in u&&(n=-u.wheelDeltaY/120),"wheelDeltaX"in u&&(o=-u.wheelDeltaX/120),"axis"in u&&u.axis===u.HORIZONTAL_AXIS&&(o=n,n=0),c=o*ht,f=n*ht,"deltaY"in u&&(f=u.deltaY),"deltaX"in u&&(c=u.deltaX),(c||f)&&u.deltaMode&&(u.deltaMode==1?(c*=pt,f*=pt):(c*=_t,f*=_t)),c&&!o&&(o=c<1?-1:1),f&&!n&&(n=f<1?-1:1),{spinX:o,spinY:n,pixelX:c,pixelY:f}}zt.getEventType=function(){return Zr.firefox()?"DOMMouseScroll":Kr("wheel")?"wheel":"mousewheel"};var Jr=zt,en=Jr;const tn=$t(en);/*!
 * @monogrid/vue-boost v8.2.0-develop.3 Copyright (C) MONOGRID S.R.L. - All Rights Reserved - Unauthorized copying of this file, via any medium is strictly prohibited
 */const xt=(u,o,n)=>{const c=u>0?1:-1,f=w.utils.clamp(0,1,Math.abs(u/100)),m=Math.abs(u)>=100?o:n;return{delta:c*f*m,direction:c}};function rn(u,o=.02,n=.04){const{pixelX:c,pixelY:f}=tn(u),{delta:m,direction:_}=xt(c,o,n),{delta:g,direction:e}=xt(f,o,n);return{deltaX:m,deltaY:g,directionX:_,directionY:e,event:u}}function nn(u,{immediate:o=!0,intent:n=.4,inertial:c=.2,clampMin:f=void 0,clampMax:m=void 0}={}){const _=P(0),g=P(0),e=P(!!o),t=S=>e.value=S!==void 0?S:!e.value,r=O(()=>le(f)),i=O(()=>le(m)),s=O(()=>le(u)),l=O(()=>le(n)),a=O(()=>le(c)),{toggle:v}=Re(M);function h(){_.value=0,g.value=0}function y(S){if(!e.value)return;const{deltaY:A}=rn(S,l.value,a.value);g.value-=A,!(r.value===void 0||i.value===void 0)&&(g.value=w.utils.clamp(r.value,i.value,g.value))}function M({rafDamp:S}){_.value=w.utils.interpolate(_.value,g.value,s.value*S)}return De(window,"wheel",y),De(document,"visibilitychange",()=>document.visibilityState==="hidden"&&h()),N(e,S=>v(S),{immediate:!0}),{activate:()=>t(!0),toggle:t,current:_,reset:h}}const gt={overallSpeed:.015,xAxis:{strength:.5,speed:.1},yAxis:{strength:.5,speed:.1}};function an(){const u=it(Wt);if(!u)throw new Error("[useUniverseCamera] A ThreeEnvironment is not provided");const o=P(0),n=P(0),c=P(1),f=P(0),m=P(0),_=P(0),g=ue({x:0,y:0}),e=ue(u.controls.camera.position.clone()),t=ue(new W(Ne.UNIVERSE.lookAt.x,Ne.UNIVERSE.lookAt.y,Ne.UNIVERSE.lookAt.z)),r=Gr(),i=St(),{mappedX:s,mappedY:l}=Tt(),{current:a,target:v}=Wr(.05),{toggle:h,current:y}=nn(.08,{immediate:!1,intent:.4,inertial:.2,clampMin:qe.lerp.min,clampMax:qe.lerp.max});function M(){const{INTRO:b,DEFAULT:x}=jt,k=w.timeline(),U=i.mobile.value?b.position.y:x.position.y;return k.fromTo(o,{value:0},{value:1,duration:3,ease:"linear"}),k.fromTo(e,{x:b.position.x,y:b.position.y,z:b.position.z},{x:x.position.x,y:U,z:x.position.z,duration:4,ease:"expo.inOut"},0),k}function S(){const{xAxis:b,yAxis:x}=gt;g.x=Math.sin(r(_.value*b.speed,0))*b.strength*f.value,g.y=Math.sin(r(_.value*x.speed,1))*x.strength*f.value}function A({rafDamp:b}){const{percentage:x}=qe;m.value=-1*(1-Math.sin(w.utils.normalize(-2,2,a.x)*Math.PI)),_.value+=gt.overallSpeed*b,S();const k=(Mt.y-e.y)*Math.abs(1-f.value);c.value=w.utils.clamp(0,1,f.value+.3),u.controls.camera.position.x=e.x+g.x+a.x*c.value*o.value,u.controls.camera.position.y=e.y+g.y+(a.y*c.value+k)*o.value,u.controls.camera.position.z=e.z+(y.value+m.value*c.value+n.value)*o.value,f.value=w.utils.clamp(0,1,w.utils.normalize(x.min,x.max,u.controls.camera.position.z)),u.controls.camera.lookAt(t)}return Re(A),N(s,b=>{v.x=Math.sin(.5*Math.PI*b)*2}),N(l,b=>{v.y=Math.sin(.5*Math.PI*b)*.5}),{toggleWheel:h,holdDistance:n,transitionIn:M}}const on="/static/cables-diffuse-7LuyzvlY.jpg",sn="/static/cables-normal-3Nw-Bius.jpg",ln="/static/cables-roughness-EX8-OWI4.jpg",un="#define GLSLIFY 1\nfloat time = uTime * 0.15;\nfloat uvSide = vUv.y;\n\n#ifdef CEILING\n  time = uTime * 0.2;\n  uvSide *= -1.;\n#endif\n\nfloat timeLoop = mod(time, 1.);\nfloat colorStrip = impulse(20. - 10. * uShuffle, fract((uvSide + timeLoop) * 2.));\ncolorStrip = clamp(colorStrip, 0., 1.);\ncolorStrip *= parabola(vUv.y, 2.);\n\nvec4 diffuse = texture2D(map, vUv * 20.);\nvec3 color = mix(uColor1, uColor2, colorStrip);\n\ntotalEmissiveRadiance = color * colorStrip / (diffuse.r + diffuse.g);\ntotalEmissiveRadiance *= 2.;\n",cn="#define GLSLIFY 1\nuniform vec3 uColor1;\nuniform vec3 uColor2;\nuniform float uTime;\nuniform float uShuffle;\n\nvarying vec2 vUv;\n\nfloat parabola( float x, float k ){\n    return pow( 4.0*x*(1.0-x), k );\n}\n\nfloat impulse( float k, float x ){\n    float h = k*x;\n    return h*exp(1.0-h);\n}",Y={ceiling:{position:{x:0,y:3.5,z:0}},floor:{position:{x:0,y:0,z:0}},colorPulse1:"#3e3e3e",colorPulse2:"#7e7edf",baseColor:4079166,metalness:.3,roughness:.4},de=ee(on);de.colorSpace=tt;de.wrapS=de.wrapT=se;de.repeat.set(30,30);const fe=ee(ln);fe.colorSpace=rt;fe.wrapS=fe.wrapT=se;fe.repeat.set(30,30);const me=ee(sn);me.colorSpace=rt;me.wrapS=me.wrapT=se;me.repeat.set(30,30);const dn=new Me({color:Y.baseColor,metalness:Y.metalness,roughness:Y.roughness,map:de,normalMap:me,roughnessMap:fe});class yt extends J{constructor(n){super();T(this,"transitionShuffleOut",()=>{const n=w.timeline();return n.to(this.cablesShuffleUniforms,{value:1.4,duration:.75,ease:"sine.out"}),n});T(this,"transitionShuffleIn",()=>{const n=w.timeline();return n.to(this.cablesShuffleUniforms,{value:0,duration:2,ease:"sine.inOut"}),n});this.cableType=n,this.name="Cables-".concat(this.cableType),this.staticObjs=[],this.animatedObjs=[]}init(n){this.model=n.scene,this.createMaterials(),this.addMeshes()}dispose(){this.animatedMaterial.dispose(),this.traverse(n=>{n.isMesh&&(n.geometry.dispose(),n.material.dispose()),n.remove()})}createMaterials(){this.uniforms={uTime:{value:0},uColor1:{value:new we(Y.colorPulse1)},uColor2:{value:new we(Y.colorPulse2)},uShuffle:{value:0}},this.animatedMaterial=new Me({color:Y.baseColor,metalness:Y.metalness,roughness:Y.roughness,map:de,normalMap:me,roughnessMap:fe,defines:{CEILING:this.cableType==="ceiling"}}),this.animatedMaterial.onBeforeCompile=n=>{n.uniforms=Object.assign(n.uniforms,this.uniforms),n.vertexShader="\n        varying vec2 vUv;\n        ".concat(n.vertexShader),n.vertexShader=n.vertexShader.replace("#include <project_vertex>","#include <project_vertex>\n            vUv = uv;\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        "),n.fragmentShader="\n      ".concat(cn,"\n      ").concat(n.fragmentShader),n.fragmentShader=n.fragmentShader.replace("#include <emissivemap_fragment>","#include <emissivemap_fragment>\n        ".concat(un))},this.animatedMaterial.uniforms=this.uniforms}addMeshes(){this.model.children.forEach(n=>{n.isMesh&&(n.name.startsWith("Animated")?(n.material=this.animatedMaterial,this.animatedObjs.push(n.clone())):(n.material=dn,this.staticObjs.push(n.clone())))}),this.add(...this.staticObjs,...this.animatedObjs),this.scale.multiplyScalar(.435),this.position.set(...Object.values(Y[this.cableType].position))}onTick({time:n,rafDamp:c,timeScale:f}){for(let m=0;m<this.animatedObjs.length;m++)this.animatedObjs[m].material.uniforms.uTime.value+=.005*c*f}get cablesShuffleUniforms(){return this.animatedObjs.map(n=>n.material.uniforms.uShuffle)}}const fn="precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 uLightColor;\nuniform vec2 uResolution;\nuniform float uAlpha;\n\nvarying float vAttenuation;\nvarying float vFlicker;\nvarying float vBlurRatio;\nvarying vec2 vUv;\n\nvoid main() {\n    vec2 uv = vec2( gl_PointCoord.x, gl_PointCoord.y);\n    vec2 globUv = gl_FragCoord.xy / uResolution;\n\n    float d = max(0.0, 1.0 - length(uv - 0.5) * 2.0);\n    float alpha = smoothstep(0.0, 0.95 + (1.0 - vBlurRatio * vBlurRatio) * 0.45, d) * 0.5;\n    gl_FragColor = vec4(uLightColor, alpha * vFlicker * vAttenuation * uAlpha);\n}\n",mn="precision mediump float;\n#define GLSLIFY 1\n\nattribute float aSize;\nattribute float aRandom;\n\nuniform float uTime;\nuniform float uSpeed;\nuniform float uCameraDistance;\n\nvarying vec2 vUv;\nvarying float vFlicker;\nvarying float vAttenuation;\nvarying float vBlurRatio;\n\n#define NOISE_INTENSITY .1\n//\n// Description : Array and textureless GLSL 2D simplex noise function.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289_0(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec2 mod289_0(vec2 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec3 permute_0(vec3 x) {\n  return mod289_0(((x*34.0)+1.0)*x);\n}\n\nfloat snoise_0(vec2 v)\n  {\n  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                     -0.577350269189626,  // -1.0 + 2.0 * C.x\n                      0.024390243902439); // 1.0 / 41.0\n// First corner\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n\n// Other corners\n  vec2 i1;\n  //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\n  //i1.y = 1.0 - i1.x;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  // x0 = x0 - 0.0 + 0.0 * C.xx ;\n  // x1 = x0 - i1 + 1.0 * C.xx ;\n  // x2 = x0 - 1.0 + 2.0 * C.xx ;\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n\n// Permutations\n  i = mod289_0(i); // Avoid truncation effects in permutation\n  vec3 p = permute_0( permute_0( i.y + vec3(0.0, i1.y, 1.0 ))\n    + i.x + vec3(0.0, i1.x, 1.0 ));\n\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n\n// Gradients: 41 points uniformly over a line, mapped onto a diamond.\n// The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\n\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n\n// Normalise gradients implicitly by scaling m\n// Approximation of: m *= inversesqrt( a0*a0 + h*h );\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\n// Compute final noise value at P\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289_1(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289_1(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute_1(vec4 x) {\n     return mod289_1(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise_1(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g_0 = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g_0;\n  vec3 i1 = min( g_0.xyz, l.zxy );\n  vec3 i2 = max( g_0.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289_1(i);\n  vec4 p = permute_1( permute_1( permute_1(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\nvoid main() {\n    vec3 newPos = position;\n    newPos.xy += snoise_1(vec3(position.xy, uTime * .025)) * .25;\n    newPos.y = max(0.01, newPos.y);\n    newPos.z += snoise_0(position.zx + vec2(uTime * .075)) * NOISE_INTENSITY;\n\n    vec4 worldPosition = modelMatrix * vec4( newPos, 1.0 );\n    vec4 mvPosition = viewMatrix * worldPosition;\n\n    float blurRatio = smoothstep(0.0, 8.0, abs(-mvPosition.z - uCameraDistance));\n    float scale = 0.5 * (3.0 + blurRatio * blurRatio * 16.0);\n\n    gl_PointSize = aSize * scale;\n    gl_PointSize /= length(mvPosition.xyz);\n    gl_Position = projectionMatrix * mvPosition;\n\n    vFlicker = aRandom * pow(smoothstep(8.0, 1.0, length(newPos.xz - vec2(0., 0.))) * (1.0 - blurRatio * 0.85), 2.0);\n    vAttenuation = max(0., 1. - ( 1. / -mvPosition.z ) * .6);\n    vUv = uv;\n    vBlurRatio = blurRatio;\n}\n",ge={lightColor:"#c2c2ed",amount:512},Ge=new Ae({uniforms:{uTime:{value:0},uSpeed:{value:1},uResolution:{value:new G},uLightColor:{value:new we(ge.lightColor)},uCameraDistance:{value:1},uAlpha:{value:1}},vertexShader:mn,fragmentShader:fn,depthWrite:!1,depthTest:!0,transparent:!0,blending:At});class vn extends J{constructor(){super(),this.name="Dust",this.createParticles(),this.createMesh()}dispose(){this.traverse(o=>{o.isMesh&&(o.geometry.dispose(),o.material.dispose()),o.remove()})}createParticles(){const o=new Float32Array(ge.amount*3),n=new Float32Array(ge.amount),c=new Float32Array(ge.amount);let f;for(let m=0;m<ge.amount;m++)f=m*3,n[m]=w.utils.random(10,35),c[m]=w.utils.random(.2,1.5),o[f+0]=w.utils.random(-6,6),o[f+1]=w.utils.random(.2,6),o[f+2]=w.utils.random(-6,6);this.geometry=new It,this.geometry.setAttribute("position",new ye(o,3)),this.geometry.setAttribute("aSize",new ye(n,1)),this.geometry.setAttribute("aRandom",new ye(c,1))}createMesh(){this.mesh=new Ht(this.geometry,Ge),this.mesh.position.y=.01,this.mesh.frustumCulled=!1,this.mesh.renderOrder=Oe.DUST,this.add(this.mesh)}onTick({time:o,camera:n}){const{uTime:c,uCameraDistance:f}=Ge.uniforms;c.value=o,f.value=n.position.distanceTo({x:0,y:0,z:0})}onResize(o,n,c){const{uResolution:f}=Ge.uniforms;f.value.set(o,n)}}const hn="/static/floor-roughness-bckQODO2.jpg",pn="/static/graffiti-alpha-T1h8TAez.png",_n="/static/shadows-alpha-ZvaXoEwF.jpg";class xn extends Ae{constructor(o=new G){super({uniforms:{inputBuffer:new F(null),depthBuffer:new F(null),resolution:new F(new G),texelSize:new F(new G),halfTexelSize:new F(new G),kernel:new F(0),scale:new F(1),cameraNear:new F(0),cameraFar:new F(1),minDepthThreshold:new F(0),maxDepthThreshold:new F(1),depthScale:new F(0),depthToBlurRatioBias:new F(.25)},fragmentShader:"#include <common>\n          #include <dithering_pars_fragment>      \n          uniform sampler2D inputBuffer;\n          uniform sampler2D depthBuffer;\n          uniform float cameraNear;\n          uniform float cameraFar;\n          uniform float minDepthThreshold;\n          uniform float maxDepthThreshold;\n          uniform float depthScale;\n          uniform float depthToBlurRatioBias;\n          varying vec2 vUv;\n          varying vec2 vUv0;\n          varying vec2 vUv1;\n          varying vec2 vUv2;\n          varying vec2 vUv3;\n  \n          void main() {\n            float depthFactor = 0.0;\n            \n            #ifdef USE_DEPTH\n              vec4 depth = texture2D(depthBuffer, vUv);\n              depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n              depthFactor *= depthScale;\n              depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n            #endif\n            \n            vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n            sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n            sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n            sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n            gl_FragColor = sum * 0.25 ;\n  \n            #include <dithering_fragment>\n            #include <tonemapping_fragment>\n            #include <colorspace_fragment>\n          }",vertexShader:"uniform vec2 texelSize;\n          uniform vec2 halfTexelSize;\n          uniform float kernel;\n          uniform float scale;\n          varying vec2 vUv;\n          varying vec2 vUv0;\n          varying vec2 vUv1;\n          varying vec2 vUv2;\n          varying vec2 vUv3;\n  \n          void main() {\n            vec2 uv = position.xy * 0.5 + 0.5;\n            vUv = uv;\n  \n            vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n            vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n            vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n            vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n            vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n  \n            gl_Position = vec4(position.xy, 1.0, 1.0);\n          }",blending:Yt,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(o.x,o.y),this.kernel=new Float32Array([0,1,2,2,3])}setTexelSize(o,n){this.uniforms.texelSize.value.set(o,n),this.uniforms.halfTexelSize.value.set(o,n).multiplyScalar(.5)}setResolution(o){this.uniforms.resolution.value.copy(o)}}class gn{constructor({renderer:o,resolution:n,width:c=500,height:f=500,minDepthThreshold:m=0,maxDepthThreshold:_=1,depthScale:g=0,depthToBlurRatioBias:e=.25}){this.renderTargetA=new We(n,n,{minFilter:Fe,magFilter:Fe,stencilBuffer:!1,depthBuffer:!1,type:kt}),this.renderTargetB=this.renderTargetA.clone(),this.convolutionMaterial=new xn,this.convolutionMaterial.setTexelSize(1/c,1/f),this.convolutionMaterial.setResolution(new G(c,f)),this.scene=new Xt,this.camera=new Qt,this.convolutionMaterial.uniforms.minDepthThreshold.value=m,this.convolutionMaterial.uniforms.maxDepthThreshold.value=_,this.convolutionMaterial.uniforms.depthScale.value=g,this.convolutionMaterial.uniforms.depthToBlurRatioBias.value=e,this.convolutionMaterial.defines.USE_DEPTH=g>0;const t=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),r=new Float32Array([0,0,2,0,0,2]),i=new It;i.setAttribute("position",new ye(t,3)),i.setAttribute("uv",new ye(r,2)),this.screen=new Le(i,this.convolutionMaterial),this.screen.frustumCulled=!1,this.scene.add(this.screen)}render(o,n,c){const f=this.scene,m=this.camera,_=this.renderTargetA,g=this.renderTargetB,e=this.convolutionMaterial,t=e.uniforms;t.depthBuffer.value=n.depthTexture;const r=e.kernel;let i=n,s,l,a;for(l=0,a=r.length-1;l<a;++l)s=l&1?g:_,t.kernel.value=r[l],t.inputBuffer.value=i.texture,o.setRenderTarget(s),o.render(f,m),i=s;t.kernel.value=r[l],t.inputBuffer.value=i.texture,o.setRenderTarget(this.renderToScreen?null:c),o.render(f,m)}}const yn="#define GLSLIFY 1\n#include <emissivemap_fragment>\n\nfloat distortionFactor = 0.0;\n#ifdef USE_DISTORTION\n    distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n#endif\n\nvec4 new_vUv = my_vUv;\nnew_vUv.x += distortionFactor;\nnew_vUv.y += distortionFactor;\n\nvec4 base = texture2DProj(tDiffuse, new_vUv);\nvec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\nvec4 merge = base;\n\n#ifdef USE_NORMALMAP\n    vec2 normal_uv = vec2(0.0);\n    vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n    vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n    vec3 coord = new_vUv.xyz / new_vUv.w;\n    normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n    vec4 base_normal = texture2D(tDiffuse, normal_uv);\n    vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n    merge = base_normal;\n    blur = blur_normal;\n#endif\n\nfloat depthFactor = 0.0001;\nfloat blurFactor = 0.0;\n\n#ifdef USE_DEPTH\n    vec4 depth = texture2DProj(tDepth, new_vUv);\n    depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n    depthFactor *= depthScale;\n    depthFactor = max(0.0001, min(1.0, depthFactor));\n\n#ifdef USE_BLUR\n    blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n    merge = merge * min(1.0, depthFactor + 0.5);\n#else\n    merge = merge * depthFactor;\n#endif\n\n#endif\n\nfloat reflectorRoughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n    vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n    reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n#endif\n\n#ifdef USE_BLUR\n    blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n    merge = mix(merge, blur, blurFactor);\n#endif\n\nvec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\nnewMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\nnewMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\nnewMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\ndiffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);";class wn extends Me{constructor(n={}){super(n);T(this,"_tDepth",{value:null});T(this,"_distortionMap",{value:null});T(this,"_tDiffuse",{value:null});T(this,"_tDiffuseBlur",{value:null});T(this,"_textureMatrix",{value:null});T(this,"_hasBlur",{value:!1});T(this,"_mirror",{value:0});T(this,"_mixBlur",{value:0});T(this,"_blurStrength",{value:.5});T(this,"_minDepthThreshold",{value:.9});T(this,"_maxDepthThreshold",{value:1});T(this,"_depthScale",{value:0});T(this,"_depthToBlurRatioBias",{value:.25});T(this,"_distortion",{value:1});T(this,"_mixContrast",{value:1});this.setValues(n)}onBeforeCompile(n){var c;(c=n.defines)!=null&&c.USE_UV||(n.defines.USE_UV=""),n.uniforms.hasBlur=this._hasBlur,n.uniforms.tDiffuse=this._tDiffuse,n.uniforms.tDepth=this._tDepth,n.uniforms.distortionMap=this._distortionMap,n.uniforms.tDiffuseBlur=this._tDiffuseBlur,n.uniforms.textureMatrix=this._textureMatrix,n.uniforms.mirror=this._mirror,n.uniforms.mixBlur=this._mixBlur,n.uniforms.mixStrength=this._blurStrength,n.uniforms.minDepthThreshold=this._minDepthThreshold,n.uniforms.maxDepthThreshold=this._maxDepthThreshold,n.uniforms.depthScale=this._depthScale,n.uniforms.depthToBlurRatioBias=this._depthToBlurRatioBias,n.uniforms.distortion=this._distortion,n.uniforms.mixContrast=this._mixContrast,n.vertexShader="\n          uniform mat4 textureMatrix;\n          varying vec4 my_vUv;\n          ".concat(n.vertexShader),n.vertexShader=n.vertexShader.replace("#include <project_vertex>","#include <project_vertex>\n          my_vUv = textureMatrix * vec4( position, 1.0 );\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),n.fragmentShader="\n          uniform sampler2D tDiffuse;\n          uniform sampler2D tDiffuseBlur;\n          uniform sampler2D tDepth;\n          uniform sampler2D distortionMap;\n          uniform float distortion;\n          uniform float cameraNear;\n          uniform float cameraFar;\n          uniform bool hasBlur;\n          uniform float mixBlur;\n          uniform float mirror;\n          uniform float mixStrength;\n          uniform float minDepthThreshold;\n          uniform float maxDepthThreshold;\n          uniform float mixContrast;\n          uniform float depthScale;\n          uniform float depthToBlurRatioBias;\n          varying vec4 my_vUv;\n          ".concat(n.fragmentShader),n.fragmentShader=n.fragmentShader.replace("#include <emissivemap_fragment>",yn)}get tDiffuse(){return this._tDiffuse.value}set tDiffuse(n){this._tDiffuse.value=n}get tDepth(){return this._tDepth.value}set tDepth(n){this._tDepth.value=n}get distortionMap(){return this._distortionMap.value}set distortionMap(n){this._distortionMap.value=n}get tDiffuseBlur(){return this._tDiffuseBlur.value}set tDiffuseBlur(n){this._tDiffuseBlur.value=n}get textureMatrix(){return this._textureMatrix.value}set textureMatrix(n){this._textureMatrix.value=n}get hasBlur(){return this._hasBlur.value}set hasBlur(n){this._hasBlur.value=n}get mirror(){return this._mirror.value}set mirror(n){this._mirror.value=n}get mixBlur(){return this._mixBlur.value}set mixBlur(n){this._mixBlur.value=n}get mixStrength(){return this._blurStrength.value}set mixStrength(n){this._blurStrength.value=n}get minDepthThreshold(){return this._minDepthThreshold.value}set minDepthThreshold(n){this._minDepthThreshold.value=n}get maxDepthThreshold(){return this._maxDepthThreshold.value}set maxDepthThreshold(n){this._maxDepthThreshold.value=n}get depthScale(){return this._depthScale.value}set depthScale(n){this._depthScale.value=n}get depthToBlurRatioBias(){return this._depthToBlurRatioBias.value}set depthToBlurRatioBias(n){this._depthToBlurRatioBias.value=n}get distortion(){return this._distortion.value}set distortion(n){this._distortion.value=n}get mixContrast(){return this._mixContrast.value}set mixContrast(n){this._mixContrast.value=n}}class bn{constructor(o={}){this.type="CustomReflector",this.ignoreObjects=[],this.renderer=o.renderer,this.scene=o.scene,this.camera=o.camera;const n=o.mixBlur||0,c=o.mixStrength||0,f=o.resolution||256,m=o.blur||[0,0];this.hasBlur=m[0]+m[1]>0;const _=o.geometryArgs||[1,1],g=o.minDepthThreshold||.9,e=o.maxDepthThreshold||1,t=o.depthScale||0,r=o.depthToBlurRatioBias||.25,i=o.mirror||0,s=o.distortion||1,l=o.distortionMap!==void 0?o.distortionMap:null;l&&(l.wrapS=l.wrapT=se);const a=o.materialOptions||{};this.reflectorPlane=new Zt,this.normal=new W,this.reflectorWorldPosition=new W,this.cameraWorldPosition=new W,this.rotationMatrix=new st,this.lookAtPosition=new W(0,0,-1),this.clipPlane=new $e,this.view=new W,this.target=new W,this.q=new $e,this.textureMatrix=new st,this.virtualCamera=new Kt;const v={minFilter:Fe,magFilter:Fe,format:rr,type:kt};this.rt=new We(f,f,v),this.rt.depthBuffer=!0,this.rt.depthTexture=new Jt(f,f),this.rt.depthTexture.format=er,this.rt.depthTexture.type=tr,this.rtBlur=new We(f,f,v),this.blurpass=new gn({renderer:this.renderer,resolution:f,width:m[0],height:m[1],minDepthThreshold:g,maxDepthThreshold:e,depthScale:t,depthToBlurRatioBias:r}),this.material=new wn({...a}),this.material.mirror=i,this.material.textureMatrix=this.textureMatrix,this.material.mixBlur=n,this.material.tDiffuse=this.rt.texture,this.material.tDepth=this.rt.depthTexture,this.material.tDiffuseBlur=this.rtBlur.texture,this.material.hasBlur=this.hasBlur,this.material.mixStrength=c,this.material.minDepthThreshold=g,this.material.maxDepthThreshold=e,this.material.depthScale=t,this.material.depthToBlurRatioBias=r,this.material.transparent=!0,this.material.distortion=s,this.material.distortionMap=l,this.material.defines.USE_BLUR=this.hasBlur?"":void 0,this.material.defines.USE_DEPTH=t>0?"":void 0,this.material.defines.USE_DISTORTION=l?"":void 0;const[h,y,M,S]=_;this.mesh=new Le(new ze(h,y,M,S),this.material)}get getRenderTarget(){return this.rt}dispose(){this.rt.dispose(),this.material.dispose()}beforeRender(){if(this.reflectorWorldPosition.setFromMatrixPosition(this.mesh.matrixWorld),this.cameraWorldPosition.setFromMatrixPosition(this.camera.matrixWorld),this.rotationMatrix.extractRotation(this.mesh.matrixWorld),this.normal.set(0,0,1),this.normal.applyMatrix4(this.rotationMatrix),this.view.subVectors(this.reflectorWorldPosition,this.cameraWorldPosition),this.view.dot(this.normal)>0)return;this.view.reflect(this.normal).negate(),this.view.add(this.reflectorWorldPosition),this.rotationMatrix.extractRotation(this.camera.matrixWorld),this.lookAtPosition.set(0,0,-1),this.lookAtPosition.applyMatrix4(this.rotationMatrix),this.lookAtPosition.add(this.cameraWorldPosition),this.target.subVectors(this.reflectorWorldPosition,this.lookAtPosition),this.target.reflect(this.normal).negate(),this.target.add(this.reflectorWorldPosition),this.virtualCamera.position.copy(this.view),this.virtualCamera.up.set(0,1,0),this.virtualCamera.up.applyMatrix4(this.rotationMatrix),this.virtualCamera.up.reflect(this.normal),this.virtualCamera.lookAt(this.target),this.virtualCamera.far=this.camera.far,this.virtualCamera.updateMatrixWorld(),this.virtualCamera.projectionMatrix.copy(this.camera.projectionMatrix),this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.virtualCamera.projectionMatrix),this.textureMatrix.multiply(this.virtualCamera.matrixWorldInverse),this.textureMatrix.multiply(this.mesh.matrixWorld),this.reflectorPlane.setFromNormalAndCoplanarPoint(this.normal,this.reflectorWorldPosition),this.reflectorPlane.applyMatrix4(this.virtualCamera.matrixWorldInverse),this.clipPlane.set(this.reflectorPlane.normal.x,this.reflectorPlane.normal.y,this.reflectorPlane.normal.z,this.reflectorPlane.constant);const o=this.virtualCamera.projectionMatrix;this.q.x=(Math.sign(this.clipPlane.x)+o.elements[8])/o.elements[0],this.q.y=(Math.sign(this.clipPlane.y)+o.elements[9])/o.elements[5],this.q.z=-1,this.q.w=(1+o.elements[10])/o.elements[14],this.clipPlane.multiplyScalar(2/this.clipPlane.dot(this.q)),o.elements[2]=this.clipPlane.x,o.elements[6]=this.clipPlane.y,o.elements[10]=this.clipPlane.z+1,o.elements[14]=this.clipPlane.w}setIgnoreVisibilty(o){for(let n=0;n<this.ignoreObjects.length;n++)this.ignoreObjects[n].visible=o;this.mesh.visible=o}onTick(){this.setIgnoreVisibilty(!1);const o=this.renderer.shadowMap.autoUpdate;this.beforeRender(),this.renderer.shadowMap.autoUpdate=!1,this.renderer.setRenderTarget(this.rt),this.renderer.state.buffers.depth.setMask(!0),this.renderer.autoClear||this.renderer.clear(),this.renderer.render(this.scene,this.virtualCamera),this.hasBlur&&this.blurpass.render(this.renderer,this.rt,this.rtBlur),this.renderer.shadowMap.autoUpdate=o,this.setIgnoreVisibilty(!0),this.renderer.setRenderTarget(null)}}const B={blur:[1024,256],distortion:.1,metalness:.13,depthScale:0,minDepthThreshold:.9,maxDepthThreshold:1,mirror:.85,mixBlur:17,mixStrength:10,normalScale:[10,10],roughness:6,textureRepeat:6,graffiti:{color:"#ffffff",roughness:6,metalness:.5,opacity:.26}},oe=ee(hn);oe.colorSpace=rt;oe.wrapS=oe.wrapT=se;oe.repeat.set(B.textureRepeat,B.textureRepeat);const be=ee(pn);be.colorSpace=tt;be.wrapS=be.wrapT=se;be.repeat.set(1,1);const Se=new Le(new ze(20,20,1,1),new Me({color:new we(B.graffiti.color),metalness:B.graffiti.metalness,roughness:B.graffiti.roughness,roughnessMap:oe,alphaMap:be,opacity:B.graffiti.opacity,transparent:!0}));Se.rotation.x=-Math.PI*.5;Se.position.y=.02;Se.renderOrder=Oe.GRAFFITI;const Te=new Le(new ze(20,20),new Ae({uniforms:{tDiffuse:{value:ee(_n)},uAlpha:{value:.6}},transparent:!0,vertexShader:"varying vec2 vUv;\n        void main() {\n            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            vUv = uv;\n        }",fragmentShader:"\n        uniform sampler2D tDiffuse;\n        uniform float uAlpha;\n        varying vec2 vUv;\n        void main() {\n            vec4 tex = texture2D(tDiffuse, vUv);\n            gl_FragColor = vec4(tex.r * vec3(0.,0.,0.), (1. - tex.r) * uAlpha);\n        }"}));Te.rotation.x=-Math.PI*.5;Te.position.y=.04;Te.renderOrder=Oe.SHADOWS;class Sn extends J{constructor(n){super();T(this,"transitionIn",()=>{const{material:n}=this.reflector,c=w.timeline();return c.fromTo(n,{mirror:1},{mirror:B.mirror,duration:1.25,delay:1.5,ease:"sine.inOut"}),c});this.name="Floor",this.renderer=n.renderer,this.scene=n.scene,this.camera=n.camera,this.createMesh(),this.add(Te),this.add(Se),this.reflector.ignoreObjects.push(Se,Te)}dispose(){this.traverse(n=>{n.isMesh&&(n.geometry.dispose(),n.material.dispose()),n.remove()})}createMesh(){this.reflector=new bn({renderer:this.renderer,scene:this.scene,camera:this.camera,geometryArgs:[20,20,1,1],resolution:1024,mirror:B.mirror,mixBlur:B.mixBlur,mixStrength:B.mixStrength,minDepthThreshold:B.minDepthThreshold,maxDepthThreshold:B.maxDepthThreshold,distortionMap:oe,distortion:B.distortion,blur:[B.blur[0],B.blur[1]],depthScale:B.depthScale,materialOptions:{metalness:B.metalness,roughnessMap:oe,roughness:B.roughness,normalScale:[B.textureRepeat,B.textureRepeat]}}),this.reflector.mesh.rotation.x=-Math.PI*.5,this.add(this.reflector.mesh)}onTick({time:n}){this.reflector.onTick()}}const Tn="/static/mist-diffuse-ub5Qp4AM.png",Mn="precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D tDiffuse;\nuniform vec3 uLightColor;\nuniform vec2 uResolution;\nuniform vec2 uBottomFadeRange;\nuniform vec2 uSidesFadeRange;\nuniform float uTime;\nuniform float uStrength;\n\nvarying vec2 vUv;\nvarying vec2 vScale;\n\nfloat range(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n    vec3 sub = vec3(oldValue, newMax, oldMax) - vec3(oldMin, newMin, oldMin);\n    return sub.x * sub.y / sub.z + newMin;\n}\n\nvec2 range(vec2 oldValue, vec2 oldMin, vec2 oldMax, vec2 newMin, vec2 newMax) {\n    vec2 oldRange = oldMax - oldMin;\n    vec2 newRange = newMax - newMin;\n    vec2 val = oldValue - oldMin;\n    return val * newRange / oldRange + newMin;\n}\n\nvec3 range(vec3 oldValue, vec3 oldMin, vec3 oldMax, vec3 newMin, vec3 newMax) {\n    vec3 oldRange = oldMax - oldMin;\n    vec3 newRange = newMax - newMin;\n    vec3 val = oldValue - oldMin;\n    return val * newRange / oldRange + newMin;\n}\n\nfloat crange(float oldValue, float oldMin, float oldMax, float newMin, float newMax) {\n    return clamp(range(oldValue, oldMin, oldMax, newMin, newMax), min(newMin, newMax), max(newMin, newMax));\n}\n\nvec2 crange(vec2 oldValue, vec2 oldMin, vec2 oldMax, vec2 newMin, vec2 newMax) {\n    return clamp(range(oldValue, oldMin, oldMax, newMin, newMax), min(newMin, newMax), max(newMin, newMax));\n}\n\nvec3 crange(vec3 oldValue, vec3 oldMin, vec3 oldMax, vec3 newMin, vec3 newMax) {\n    return clamp(range(oldValue, oldMin, oldMax, newMin, newMax), min(newMin, newMax), max(newMin, newMax));\n}\n\nvoid main() {\n    float t = uTime;\n    float verticalGradient = 1.0 - vUv.y;\n    verticalGradient *= smoothstep(uBottomFadeRange.x, uBottomFadeRange.y, vUv.y);\n    verticalGradient *= smoothstep(uSidesFadeRange.x, uSidesFadeRange.y, vUv.x);\n    verticalGradient *= smoothstep(uSidesFadeRange.x, uSidesFadeRange.y, 1.0 - vUv.x);\n\n    float color = 1.0;\n    vec4 color1 = texture2D(tDiffuse, vUv * vScale + vec2(t * -0.02, 0.0));\n    vec4 color2 = texture2D(tDiffuse, vUv * 0.5 * vScale + vec2(t * -0.021, t * -0.015));\n    color = color1.r * color2.g;\n    color = crange(color, 0.2, 1.0, 0.0, 1.0);\n\n    gl_FragColor.rgb = uLightColor;\n    gl_FragColor.a = color * uStrength * verticalGradient;\n}",An="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 aScale;\nattribute float aRandom;\nattribute float aOffset;\n\nuniform float uTime;\n\nvarying vec2 vUv;\nvarying vec2 vScale;\n\nmat3 rotate3d(in vec3 axis, in float radians) {\n    axis = normalize(axis);\n    float s = sin(radians);\n    float c = cos(radians);\n    float oc = 1.0 - c;\n\n    return mat3(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,\n                oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,\n                oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c );\n}\n\nvoid main() {\n    vec2 instancePosition = vec2(instanceMatrix[3][0], instanceMatrix[3][2]);\n\n    vec3 newPos = position;\n\n    float angle = atan(instancePosition.x - cameraPosition.x, instancePosition.y - cameraPosition.z);\n    vec4 mvPosition = vec4(newPos, 1.0);\n    mvPosition.xyz *= rotate3d(vec3(0.0, 1.0, 0.0), angle);\n\n    #ifdef USE_INSTANCING\n        mvPosition = instanceMatrix * mvPosition;\n    #endif\n    mvPosition = modelViewMatrix * mvPosition;\n    gl_Position = projectionMatrix * mvPosition;\n    \n    vUv = uv;\n    vScale = aScale;\n}",In={lightColor:"#8b7ab2"},Q=[{pos:{x:-4,y:3,z:-2.1},scale:{x:3,y:3.3}},{pos:{x:-4,y:2.75,z:.25},scale:{x:2,y:.9}},{pos:{x:4,y:3,z:-2.1},scale:{x:2.735,y:2.9}},{pos:{x:4,y:2.75,z:.25},scale:{x:2.17,y:1.119}}],_e=new J,wt=new ze(1,1,1,1),et=ee(Tn);et.wrapS=et.wrapT=se;const Ve=new Ae({uniforms:{tDiffuse:{value:et},uTime:{value:0},uResolution:{value:new G},uLightColor:{value:new we(In.lightColor)},uCameraDistance:{value:.2},uAlpha:{value:1},uStrength:{value:.2},uBottomFadeRange:{value:new G(.04,.3)},uSidesFadeRange:{value:new G(1.1,.39)}},vertexShader:An,fragmentShader:Mn,depthWrite:!1,depthTest:!1,transparent:!0,blending:At});class kn extends J{constructor(){super(),this.name="Mist",this.createMesh()}dispose(){this.traverse(o=>{o.isMesh&&(o.geometry.dispose(),o.material.dispose()),o.remove()})}createMesh(){this.mesh=new nr(wt,Ve,Q.length),this.mesh.renderOrder=Oe.MIST;const o=new Float32Array(Q.length*2);let n;for(let c=0;c<Q.length;c++){n=c*2,o[n+0]=Q[c].scale.x,o[n+1]=Q[c].scale.y;const f=new W(Q[c].pos.x,Q[c].pos.y,Q[c].pos.z),m=new W(10,5,10);_e.position.copy(f),_e.scale.copy(m),_e.rotation.y=Math.PI,_e.updateMatrix(),this.mesh.setMatrixAt(c,_e.matrix)}wt.setAttribute("aScale",new ir(o,2)),this.mesh.instanceMatrix.needsUpdate=!0,this.add(this.mesh)}onTick({time:o,camera:n}){const{uTime:c,uCameraDistance:f}=Ve.uniforms;c.value=o,f.value=n.position.distanceTo({x:0,y:0,z:0})}onResize(o,n,c){const{uResolution:f}=Ve.uniforms;f.value.set(o,n)}}const Bn="precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D tTex;\nuniform vec2 uImgSize;\nuniform float uTime;\nuniform float uIntro;\nuniform float uSwitch;\n\nvarying vec2 vUv;\nvarying vec2 vUvMask;\n\n#define MASK_SIZE .001\n#define BLUE vec3(0., 0., 1.)\n#define BLACK vec3(0.)\nvec2 coverTexUv(vec2 imgSize, vec2 ouv, vec2 res) {\n    vec2 s = res;\n    vec2 i = imgSize;\n    float rs = s.x / s.y;\n    float ri = i.x / i.y;\n    vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);\n    vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;\n\n    return ouv * s / new + offset;\n}\n\nfloat blendOverlay(float base, float blend) {\n	return base<0.5?(2.0*base*blend):(1.0-2.0*(1.0-base)*(1.0-blend));\n}\n\nvec3 blendOverlay(vec3 base, vec3 blend) {\n	return vec3(blendOverlay(base.r,blend.r),blendOverlay(base.g,blend.g),blendOverlay(base.b,blend.b));\n}\n\nvec3 blendOverlay(vec3 base, vec3 blend, float opacity) {\n	return (blendOverlay(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nvec3 blendHardLight(vec3 base, vec3 blend) {\n	return blendOverlay(blend,base);\n}\n\nvec3 blendHardLight(vec3 base, vec3 blend, float opacity) {\n	return (blendHardLight(base, blend) * opacity + base * (1.0 - opacity));\n}\n\nfloat aastep(float x) {\n    float w = fwidth(x),\n          c = smoothstep(.7,-.7,(abs(fract(x-.25)-.5)-.25)/w);\n    return c;\n}\n\nvoid main() {\n    vec2 baseUv = vUv;\n    vec2 maskUv = vec2(vUvMask.x, 1. - vUvMask.y);\n\n    vec2 texUv = maskUv;\n    texUv = coverTexUv(uImgSize, maskUv, vec2(1024., 1024.));\n\n    vec4 color = texture2D(tTex, texUv);\n\n    float xRatio = 70.;\n    float yRatio = (xRatio * 1.6 / 1.);\n    float thickness = .8;\n    float directionX = baseUv.x;\n    float directionY = baseUv.y;\n    float checkBoard = aastep(mod(directionX * xRatio, 1.) * thickness);\n    checkBoard += aastep(mod(directionY * yRatio, 1.) * thickness);\n    checkBoard = clamp(checkBoard, 0.0, 1.0);\n    color.rgb = blendHardLight(color.rgb, vec3(1. - checkBoard), .2);\n\n    vec3 outputColor = mix(BLACK, color.rgb, uSwitch);\n    vec3 finalColor = mix(outputColor, BLUE, uIntro);\n    gl_FragColor = vec4(finalColor, 1.);\n}\n",Pn="#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec2 vUvMask;\n\nvoid main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    vUv = uv;\n    vUvMask = uv1;\n}",Un={vigPow:.4,vigRed:1.1,position:{x:0,y:Mt.y,z:0}},bt=new Ae({uniforms:{tTex:{value:null},uTime:{value:0},uIntro:{value:1},uImgSize:{value:new G(1,1)},uSwitch:{value:0}},transparent:!1,vertexShader:Pn,fragmentShader:Bn}),Cn=new Me({color:8026746,metalness:1,roughness:.125});class Dn extends J{constructor(){super();T(this,"transitionIn",()=>{const n=w.timeline();for(let c=0;c<this.screens.length;c++)n.add(this.transitionInSingle(this.screens[c]),0);return n});T(this,"transitionInSingle",n=>{const{uIntro:c,uSwitch:f}=n.material.uniforms,m=w.timeline(),_=w.utils.random(.25,.75);return m.set(f,{value:0},0),m.to(c,{value:0,duration:1.25,ease:"sine.inOut"},1.5),m.add(w.effects.blink(f,{in:!0}),"".concat(1.5+_)),m});T(this,"transitionShuffleOut",()=>{const n=w.timeline();return n.add(w.effects.blink(this.monitorsUniformSwitch,{in:!1}),0),n});T(this,"transitionShuffleIn",()=>{const n=w.timeline();return n.add(w.effects.blink(this.monitorsUniformSwitch,{duration:.5,in:!0}),">+=.2"),n});this.name="MonitorCluster",this.screens=[],this.frames=[],this.monitors=new J}init(n){this.model=n.scene,this.addMeshes()}dispose(){var n;(n=bt.uniforms.tTex.value)==null||n.dispose(),this.traverse(c=>{c.isMesh&&(c.geometry.dispose(),c.material.dispose()),c.remove()})}uploadTexture(n=null){var c,f;for(let m=0;m<this.screens.length;m++){const{tTex:_}=this.screens[m].material.uniforms;(f=(c=_.value)==null?void 0:c.dispose)==null||f.call(c),_.value=n}}addMeshes(){this.model.children.forEach(n=>{n.isMesh&&(n.name.startsWith("Monitor")?(n.material=bt.clone(),this.screens.push(n.clone())):(n.material=Cn,this.frames.push(n.clone())))}),this.monitors.add(...this.screens,...this.frames),this.monitors.scale.multiplyScalar(.435),this.monitors.position.y=Un.position.y,this.add(this.monitors)}onTick(n){for(let c=0;c<this.screens.length;c++){const{uTime:f}=this.screens[c].material.uniforms;f.value=n}}get monitorsUniformSwitch(){return this.screens.map(n=>n.material.uniforms.uSwitch)}get monitorsUniformImgSize(){return this.screens.map(n=>n.material.uniforms.uImgSize.value)}}const H={color:"#7e7edf",intensity:175,angle:1,distance:10,penumbra:.45,decay:2,position:{x:0,y:6,z:1}};class Fn extends ar{constructor(){super(H.color);T(this,"transitionShuffleOut",()=>{const n=w.timeline();return n.to(this,{keyframes:{intensity:[175,50,175,50,175,100,175,40,40,40],ease:"power1.inOut"},duration:1.15,ease:"power2.in"},0),n});T(this,"transitionShuffleIn",()=>{const n=w.timeline();return n.to(this,{keyframes:{intensity:[40,150,175,50,175,100,175,40,175,175],ease:"power1.inOut"},duration:1,ease:"power2.in"},.2),n});this.intensity=H.intensity,this.angle=H.angle,this.distance=H.distance,this.penumbra=H.penumbra,this.decay=H.decay,this.position.set(H.position.x,H.position.y,H.position.z)}}const K={cablesCeiling:{id:Ir,model:void 0},cablesFloor:{id:kr,model:void 0},monitors:{id:Br,model:void 0}};async function En(u){return new Promise((o,n)=>{if(K[u].model)return o(K[u].model);yr.load(K[u].id,c=>{K[u].model=c,o(c)},void 0,n)})}const Rn=nt({name:"WebGLUniverse",components:{},props:{media:{type:Object,required:!0}},emits:["onloaded","onshuffle"],setup(u,{attrs:o,slots:n,emit:c,expose:f}){const m=it(sr);if(!m)throw new Error("[WebGLUniverse] A ThreeEnvironment is not provided");const{isPressing:_}=Tt(),{toggleWheel:g,holdDistance:e,transitionIn:t}=an(),r=P(!1),i=P(1),s=P(!1),l=O(()=>lr.getMetaData(u.media)),a=O(()=>[Number(l.value["video-width"]||l.value["image-width"]),Number(l.value["video-height"]||l.value["image-height"])]),v=O(()=>{var $,ne;let p="/media/".concat(u.media.id);l.value["image-width"]!==void 0&&(p+="?max-w=800");const I=ee(p,void 0,void 0);return I.colorSpace=tt,l.value["video-width"]!==void 0&&((ne=($=I.image).play)==null||ne.call($)),I}),h=re(),y=new or(789516);y.intensity=.3;const M=new J;M.position.set(0,2,0);const S=new Fn;S.target=M;const A=new Dn,b=new yt("ceiling"),x=new yt("floor"),k=new vn,U=new kn,L=new Sn({renderer:m.webgl.renderer,scene:m.webgl.scene,camera:m.controls.camera});L.reflector.ignoreObjects.push(b,x,k,U);const z=[y,M,S,A,b,x,k,U,L];C();async function C(){await Promise.all(Object.keys(K).map(En)),c("onloaded"),A.init(K.monitors.model),b.init(K.cablesCeiling.model),x.init(K.cablesFloor.model),s.value=!0,j()}function j(){const p=w.timeline({delay:.5,onStart:()=>r.value=!1});p.fromTo([m.globals.postFx.value.shaderMaterial.uniforms.uBend],{value:1},{value:0,duration:3,ease:"power3.in"},0),p.to({},{duration:.01,onComplete:()=>r.value=!0},3),p.add(t,0),p.add(A.transitionIn,0),p.add(L.transitionIn,.15)}function V(p=()=>{}){c("onshuffle",!0);const I=w.timeline({onComplete:p});I.to(i,{value:3,duration:.75,ease:"expo.out"},0),I.add(S.transitionShuffleOut,0),I.add(A.transitionShuffleOut,0),I.add(b.transitionShuffleOut,.1),I.add(x.transitionShuffleOut,.1);const $=w.timeline({onStart:()=>{h.pause().progress(0).reversed(),r.value=!1},onComplete:()=>r.value=!0});return $.to(e,{value:2,duration:2.4,ease:"cameraBounceBack"},0),$.to(m.globals.postFx.value.shaderMaterial.uniforms.uBend,{value:.65,duration:2.4,ease:"cameraBounceBack"},0),$.to(m.globals.postFx.value.shaderMaterial.uniforms.uHold,{value:.75,duration:2.4,ease:"cameraBounceBack"},0),I}function te(){const p=w.timeline();return p.add(S.transitionShuffleIn,"shuffleIn"),p.add(A.transitionShuffleIn,"shuffleIn"),p.to({},{duration:.01,onComplete:()=>c("onshuffle",!1)},1.15),p.add(b.transitionShuffleIn,"shuffleIn+=.5"),p.add(x.transitionShuffleIn,"shuffleIn+=.5"),p.to(i,{value:1,duration:2,ease:"sine.inOut"},"shuffleIn+=.5"),p}function re(){const p=w.timeline({paused:!0,reversed:!0});return p.fromTo(m.globals.postFx.value.shaderMaterial.uniforms.uHold,{value:0},{value:.75,duration:1,overwrite:!0,ease:"sine.inOut"},0),p.fromTo(m.globals.postFx.value.shaderMaterial.uniforms.uBend,{value:0},{value:.35,duration:1.5,overwrite:!0,ease:"sine.inOut"},0),p.fromTo(e,{value:0},{value:1,duration:1.5,overwrite:!0,ease:"sine.inOut"},0),p.to(i,{value:.2,duration:1,overwrite:!0,ease:"sine.inOut"},0),p}function Nt({time:p,rafDamp:I}){A==null||A.onTick({time:p}),b==null||b.onTick({time:p,rafDamp:I,timeScale:i.value}),x==null||x.onTick({time:p,rafDamp:I,timeScale:i.value}),L==null||L.onTick({time:p}),k==null||k.onTick({time:p,camera:m.controls.camera}),U==null||U.onTick({time:p,camera:m.controls.camera})}return Re(Nt),gr(()=>{z.forEach(p=>{var I;return(I=p==null?void 0:p.dispose)==null?void 0:I.call(p)}),m.webgl.scene.remove(...z)}),N(()=>!!m.webgl.scene,p=>{p&&m.webgl.scene.add(...z)},{immediate:!0}),N([v,s],([p,I],[$,ne])=>{A.uploadTexture(p),A.monitorsUniformImgSize.length>1&&w.set(A.monitorsUniformImgSize,{x:a.value[0],y:a.value[1]}),ne&&te()},{immediate:!0}),N([_,r],([p,I])=>{I&&(p?(R.fade("uni-hold-loop",{duration:1.5}),R.fadeFrequency("uni-soundtrack-filter-loop",{duration:1.5,valueIn:.2}),h.play()):(R.fade("uni-hold-loop",{directionIn:!1,duration:1.5}),R.fadeFrequency("uni-soundtrack-filter-loop",{directionIn:!1,duration:1.5}),h.reverse()))}),N(r,p=>g(p)),N([()=>lt(m.width),()=>lt(m.height),()=>m.webgl.renderer],([p,I,$])=>{if(!$)return;const ne=$.getPixelRatio()||1;k==null||k.onResize(p,I,ne),U==null||U.onResize(p,I,ne)},{immediate:!0}),f({eventsEnabled:r,transitionShuffleOut:V}),()=>{var p;return(p=n.default)==null?void 0:p.call(n)}}}),On=Object.entries(Object.assign({"/src/assets/audio/uni-click.mp3":br,"/src/assets/audio/uni-hold-loop.mp3":Sr,"/src/assets/audio/uni-hover.mp3":Tr,"/src/assets/audio/uni-shuffle.mp3":Mr,"/src/assets/audio/uni-soundtrack-filter-loop.mp3":Ar})).reduce((u,[o,n])=>{const c=o.substring(o.lastIndexOf("/")+1,o.lastIndexOf(".")),f=c.includes("loop"),m=c.includes("filter");return u[c]={src:n,loop:f,filter:m},u},{}),Ln=nt({name:"UniversePage",components:{WebGLUniverse:Rn,OverlayTexts:ur,CtaPrimary:cr,ButtonSound:Nr},props:{},setup(u,{attrs:o,slots:n,emit:c}){const f=it(vr),m=P(),_=P(!1),{data:g}=dr({variables:fr()}),e=St(),t=P(0),r=P(!1),i=O(()=>{var v;return(v=g.value)==null?void 0:v.content}),s=O(()=>{var v;return[...((v=i.value)==null?void 0:v.contents)||[]].sort(()=>.5-Math.random())}),l=O(()=>s.value[t.value]);R.setAudio(On);function a(){R.play("uni-shuffle"),R.play("uni-click"),m.value.transitionShuffleOut(()=>{t.value=(t.value+1)%s.value.length})}return N(()=>f.value.visible,v=>{v&&(R.fade("uni-soundtrack-filter-loop",{directionIn:!1,duration:1}),R.fade("uni-hold-loop",{directionIn:!1,duration:1}))}),N([i,_,f],([v,h,y])=>{!v||!h||!y||(y.hide(),R.fade("uni-soundtrack-filter-loop",{seek:!0}))},{immediate:!0}),mr({title:()=>{var v,h;return((v=i.value)==null?void 0:v.seoTitle)||((h=i.value)==null?void 0:h.title)},description:()=>{var v;return(v=i.value)==null?void 0:v.seoDescription},ogImage:()=>{var v;return wr((v=i.value)==null?void 0:v.seoImage)}}),{elUniverse:m,content:i,currentItem:l,currentIndex:t,sceneLoaded:_,shuffling:r,platform:e,onShuffle:a,onMouseEnter:()=>R.play("uni-hover")}}}),zn={key:0},Nn={key:0,class:"container-big w-full h-lview flex items-center justify-between pt-10 pb-10 pointer-events-none select-none overflow-hidden"},qn={key:0,class:"container-big fixed bottom-0 left-0 right-0 pb-5"},Gn={key:0,class:"flex h-full items-end justify-center mb-4"},Vn={class:"grid grid-cols-2 items-center md:grid-cols-3"},$n={class:"label1 c-grey"},Wn=["href"],jn={class:"leading-4"},Hn={key:1,class:"title label1 mt-1 leading-4"},Yn={key:0,class:"flex h-full items-end justify-center"},Xn={class:"text-right"},Qn={class:"label1 c-grey mt-1"};function Zn(u,o,n,c,f,m){const _=Ie("OverlayTexts"),g=Ie("CtaPrimary"),e=Ie("ButtonSound"),t=Ie("WebGLUniverse");return u.content?(Z(),ie("div",zn,[X(ct,null,{default:xe(()=>{var r;return[(r=u.elUniverse)!=null&&r.eventsEnabled&&u.platform.desktop.value?(Z(),ie("div",Nn,[X(_,{list:[u.$t("scroll to get closer"),u.$t("move your mouse to rotate"),u.$t("click and hold to apply effect")],class:"w-[30%] h-[80%]"},null,8,["list"]),X(_,{list:[u.$t("click and hold to apply effect"),u.$t("move your mouse to rotate"),u.$t("scroll to get closer")],class:"w-[30%] h-[80%]"},null,8,["list"])])):ve("",!0)]}),_:1}),X(ct,null,{default:xe(()=>{var r;return[(r=u.elUniverse)!=null&&r.eventsEnabled?(Z(),ie("div",qn,[u.platform.desktop.value?ve("",!0):(Z(),ie("div",Gn,[X(g,{class:"btn select-none",scrambled:"",filled:!0,green:!0,onMouseenter:u.onMouseEnter,onClick:u.onShuffle},{default:xe(()=>[dt(he(u.$t("Shuffle")),1)]),_:1},8,["onMouseenter","onClick"])])),q("div",Vn,[q("div",null,[q("p",$n,"CH_"+he(u.currentIndex+1),1),u.currentItem.info.url?(Z(),ie("a",{key:0,href:u.currentItem.info.url,target:"_blank",class:"title title-link inline-flex flex-row items-end label1 mt-1 select-none"},[q("span",jn,he(u.currentItem.info.title),1)],8,Wn)):(Z(),ie("p",Hn,he(u.currentItem.info.title),1))]),u.platform.desktop.value?(Z(),ie("div",Yn,[X(g,{class:"btn select-none",scrambled:"",filled:!0,green:!0,disabled:u.shuffling,onMouseenter:u.onMouseEnter,onClick:u.onShuffle},{default:xe(()=>[dt("Shuffle")]),_:1},8,["disabled","onMouseenter","onClick"])])):ve("",!0),q("div",Xn,[q("p",Qn,he(u.$t("Sound")),1),X(e,{class:"ml-auto"})])])])):ve("",!0)]}),_:1}),X(t,{ref:"elUniverse",media:u.currentItem.media,onOnshuffle:o[0]||(o[0]=r=>u.shuffling=r),onOnloaded:o[1]||(o[1]=r=>u.sceneLoaded=!0)},null,8,["media"])])):ve("",!0)}const ni=Bt(Ln,[["render",Zn],["__scopeId","data-v-2d602d6d"]]);export{ni as default};
//# sourceMappingURL=UniversePage-PJmLYMJO.js.map
